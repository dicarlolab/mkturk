{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack:///webpack/runtime/chunk loaded","webpack:///./src/editor-params.ts","webpack:///./src/main.ts","webpack:///./src/mkfinder.ts","webpack:///./src/mkmedia.ts","webpack:///./src/mkquery.ts","webpack:///./src/parser.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/amd define","webpack:///webpack/runtime/amd options","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/global","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///webpack/runtime/jsonp chunk loading","webpack:///webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","export const taskParamSchema = {\n  \"title\": \"MkTurk Task Params\",\n  \"description\": \"Object containing MkTurk task parameters\",\n  \"type\": [\"object\", \"array\"],\n  \"properties\": {\n    \"Agent\": {\n      \"type\": \"string\"\n    },\n    \"CheckRFID\": {\n      \"type\": \"integer\"\n    },\n    \n    \"Automator\": {\n      \"type\": [\n        \"string\",\n        \"integer\"\n      ]\n    },\n    \"AutomatorFilePath\": {\n      \"type\": \"string\",\n      \"examples\": [\n        \"/mkturkfiles/paramterfiles/automators/touch_m2s_objectome.json\"\n      ]\n    },\n    \"CurrentAutomatorStage\": {\n      \"type\": \"integer\"\n    },\n    \"MinPercentCriterion\": {\n      \"type\": \"integer\"\n    },\n    \"MinTrialsCriterion\": {\n      \"type\": \"integer\"\n    },\n\n\n\n    \"DragtoRespond\": {\n      \"type\": \"integer\",\n    },\n    \"CalibrateEye\": {\n      \"type\": \"integer\",\n    },\n    \"NRSVP\": {\n      \"type\": \"integer\",\n    },\n    \"SameDifferent\": {\n      \"type\": \"integer\",\n    },\n    \"SamplingStrategy\": {\n      \"type\": \"string\"\n    },\n    \"NStickyResponse\": {\n      \"type\": \"integer\"\n    },\n    \"NTrialsPerBagBlock\": {\n      \"type\": \"integer\"\n    },\n\n\n    \"NGridPoints\": {\n      \"type\": \"integer\",\n      \"minimum\": 1\n    },\n    \"GridSpacingInches\": {\n      \"type\": \"number\"\n    },\n    \"GridXOffsetInches\": {\n      \"type\": \"number\"\n    },\n    \"GridYOffsetInches\": {\n      \"type\": \"number\"\n    },\n    \"FixationGridIndex\": {\n      \"type\": \"integer\",\n      \"minimum\": -1\n    },\n    \"SampleGridIndex\": {\n      \"type\": \"integer\",\n      \"minimum\": -1\n    },\n    \"ObjectGridIndex\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"integer\",\n        \"minimum\": 0\n      }\n    },\n    \"ChoiceGridIndex\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"integer\",\n        \"minimum\": 0\n      }\n    },\n    \"TestGridIndex\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"integer\",\n        \"minimum\": 0\n      }\n    },\n\n    \n\n    \"NFixations\": {\n      \"type\": \"integer\",\n      \"minimum\": 1\n    },\n    \"FixationUsesSample\": {\n      \"type\": \"integer\",\n    },\n    \"FixationSizeInches\": {\n      \"type\": \"number\"\n    },\n    \"FixationDuration\": {\n      \"type\": \"integer\"\n    },\n    \"FixationTimeOut\": {\n      \"type\": \"integer\"\n    },\n\n\n    \"FixationWindowSizeInches\": {\n      \"type\": \"number\"\n    },\n    \"FixationDotSizeInches\": {\n      \"type\": \"number\"\n    },\n\n\n    \"ImageBagsSample\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    },\n    \"KeepSampleON\": {\n      \"type\": \"integer\",\n    },\n    \"SamplePRE\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"SampleOFF\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n\n    \"ImageBagsTest\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      }\n    },\n    \"KeepTestON\": {\n      \"type\": \"integer\",\n    },\n    \"TestOFF\": {\n      \"type\": \"integer\",\n    },\n    \"HideTestDistractors\": {\n      \"type\": \"integer\",\n    },\n\n    \"ChoiceSizeInches\": {\n      \"type\": \"number\",\n      \"minimum\": 0\n    },\n    \"HideChoiceDistractors\": {\n      \"type\": \"integer\",\n    },\n    \"ChoiceTimeOut\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n\n\n    \"RewardStage\": {\n      \"type\": \"integer\",\n    },\n    \"RewardPer1000Trials\": {\n      \"type\": \"integer\",\n    },\n    \"NRewardMax\": {\n      \"type\": \"integer\",\n    },\n    \"NConsecutiveHitsforBonus\": {\n      \"type\": \"integer\",\n    },\n    \"PunishTimeOut\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"ConsecutiveHitsITI\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n\n\n\n\n\n    \"InterTrialInterval\": {\n      \"type\": \"integer\",\n      \"minimum\": 0\n    },\n    \"BackgroundColor2D\": {\n      \"type\": \"string\",\n    },\n    \"Homecage\": {\n      \"type\": \"integer\",\n    },\n    \"Separated\": {\n      \"type\": \"integer\",\n    },\n    \"Species\": {\n      \"type\": \"string\",\n      \"examples\": [\n        \"human\",\n        \"marmoset\",\n        \"model\"\n      ],\n    },\n    \"Liquid\": {\n      \"type\": \"integer\",\n    },\n  }\n};","import { initializeApp } from \"firebase/app\";\nimport { getFirestore, doc, collection, Query, query, where } from \"firebase/firestore\";\nimport { getStorage, StorageReference, ref } from \"firebase/storage\";\nimport { getAuth, GoogleAuthProvider, getRedirectResult, signInWithRedirect } from \"firebase/auth\";\nimport { getFunctions, httpsCallable } from \"firebase/functions\";\nimport './mkfiles.css';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyA0fbv2VqE-AfF6V_nxSSXCEqaTlBlZnTI\",\n  authDomain: \"sandbox-ce2c5.firebaseapp.com\",\n  databaseURL: \"https://sandbox-ce2c5.firebaseio.com\",\n  projectId: \"sandbox-ce2c5\",\n  storageBucket: \"sandbox-ce2c5.appspot.com\",\n  messagingSenderId: \"1003719887944\"\n};\nlet firebaseApp = initializeApp(firebaseConfig);\n\nimport { Mkquery } from \"./mkquery\";\nimport { Mkfinder } from \"./mkfinder\";\n\nconst auth = getAuth(firebaseApp);\n\nconst provider = new GoogleAuthProvider();\nprovider.addScope(\"https://www.googleapis.com/auth/contacts.readonly\");\ngetRedirectResult(auth).then(result => {\n  if (result) {\n    console.log(\"Sign-In Redirect Result, USER:\", result.user.email, \"is signed in\");\n  } else if (auth.currentUser) {\n    console.log(\"Sign-In Redirect Result, USER:\", \"is signed in\");\n  } else {\n    signInWithRedirect(auth, provider)\n  }\n});\n\n\nconst functions = getFunctions(firebaseApp);\nconst db = getFirestore(firebaseApp);\nconst storage = getStorage(firebaseApp);\nconst storageRef = ref(storage); \nconst rootRef = ref(storageRef, 'mkturkfiles');\nlet isRoot = true;\n\nlet mkq = new Mkquery();\nlet mkf = new Mkfinder();\n\nlet bqListDatasets = httpsCallable(functions, 'bqListDatasets');\n\nlet bqDatasetList = bqListDatasets();\nbqDatasetList.then((datasetList: any) => {\n  let bqOptgroup = \n    document.querySelector('#bigquery-optgroup') as HTMLOptGroupElement;\n  datasetList.data.forEach((dataset: any) => {\n    let option = document.createElement('option');\n    option.value = dataset;\n    option.textContent = 'bq/' + dataset;\n    bqOptgroup.appendChild(option);\n  });\n});\n\n\nlet rfidToggle = document.querySelector(\"#rfid-switch\") as HTMLInputElement;\nlet qryLocSelc = document.querySelector(\"#qry-loc-selector\") as HTMLSelectElement;\nlet fieldSelector =\n    document.querySelector(\"#field-selector\") as HTMLSelectElement;\n\n\n/* Quick Links */\nlet homeLink\n  = document.querySelector('#quick-link-home') as HTMLElement;\nlet paramsLink =\n    document.querySelector(\"#quick-link-params\") as HTMLElement;\nlet paramstorageLink\n  = document.querySelector('#quick-link-paramstorage') as HTMLElement;\nlet sceneParamsLink =\n    document.querySelector(\"#quick-link-sceneparams\") as HTMLElement;\nlet dailyDataLink = \n  document.querySelector('#quick-link-dailydata') as HTMLElement;\nlet marmosetsLink = \n    document.querySelector(\"#quick-link-marmosets\") as HTMLElement;\n\n\nwindow.addEventListener('load', (evt: Event) => {\n  evt.preventDefault();\n\n  isRoot = false;\n  qryLocSelc.value = \"mkturkfiles\";\n  qryLocSelc.dispatchEvent(new Event(\"change\"));\n  mkf.listStorageFiles(rootRef);\n});\n\n\nmarmosetsLink.addEventListener(\"click\", (ev: Event) => {\n  ev.preventDefault();\n\n  qryLocSelc.value = \"marmosets\";\n  fieldSelector!.value = \"name\";\n  qryLocSelc!.dispatchEvent(new Event(\"change\"));\n  fieldSelector!.dispatchEvent(new Event(\"change\"));\n\n  let ret = mkq.decodeQuery(collection(db, \"marmosets\"));\n  ret.then(docs => {\n    mkf.listFirestoreDocs(docs, \"marmosets\");\n  });\n\n});\n\nparamsLink.addEventListener(\"click\" || \"pointerup\", (ev: Event) => {\n  ev.preventDefault();\n\n  isRoot = false;\n  qryLocSelc.value = \"mkturkfiles\";\n  qryLocSelc.dispatchEvent(new Event(\"change\"));\n  mkf.listStorageFiles(ref(storageRef, 'mkturkfiles/parameterfiles/subjects'));\n\n});\n\nparamstorageLink.addEventListener('click' || 'pointerup', (ev: Event) => {\n  ev.preventDefault();\n\n  isRoot = false;\n  qryLocSelc.value = 'mkturkfiles';\n  qryLocSelc.dispatchEvent(new Event('change'));\n  mkf.listStorageFiles(ref(storageRef, 'mkturkfiles/parameterfiles/params_storage'));\n});\n\nhomeLink.addEventListener(\"click\" || \"pointerup\", (ev: Event) => {\n  ev.preventDefault();\n\n  isRoot = false;\n  qryLocSelc.value = \"mkturkfiles\";\n  qryLocSelc.dispatchEvent(new Event(\"change\"));\n  // mkf.listStorageFiles(storageRef.child(\"mkturkfiles\"));\n  mkf.listStorageFiles(rootRef);\n\n});\n\nsceneParamsLink.addEventListener(\"click\" || \"pointerup\", (ev: Event) => {\n  ev.preventDefault();\n\n  isRoot = false;\n  qryLocSelc.value = \"mkturkfiles\";\n  qryLocSelc.dispatchEvent(new Event(\"change\"));\n  // mkf.listStorageFiles(storageRef.child(\"mkturkfiles/scenebags/objectome3d\"));\n  mkf.listStorageFiles(ref(rootRef, 'scenebags/objectome3d'));\n\n});\n\ndailyDataLink.addEventListener('click' || 'pointerup', (ev: Event) => {\n  ev.preventDefault();\n  isRoot = false;\n  qryLocSelc.value = \"mkturkfiles\";\n  qryLocSelc.dispatchEvent(new Event('change'));\n  // mkf.listStorageFiles(storageRef.child('mkturkfiles/mkdailydata'));\n  mkf.listStorageFiles(ref(rootRef, 'mkdailydata'));\n});\n\nqryLocSelc!.addEventListener(\"change\", ev => {\n\n  let fs = document.querySelector(\"#field-selector\") as HTMLSelectElement;\n  let ki0 = document.querySelector(\"#keyword-input-0\") as HTMLInputElement;\n  let ki1 = document.querySelector(\"#keyword-input-1\") as HTMLInputElement;\n  let ki2 = document.querySelector(\"#keyword-input-2\") as HTMLInputElement;\n  let goBtn = document.querySelector(\"#go-btn\") as HTMLButtonElement;\n  let plotX = document.querySelector(\"#quick-plot-x\") as HTMLSelectElement;\n  let plotY = document.querySelector(\"#quick-plot-y\") as HTMLSelectElement;\n  let plotBtn = document.querySelector(\"#plot-btn\") as HTMLButtonElement;\n  let queryResult: Promise<any[]>;\n  \n  switch(qryLocSelc.value) {\n    case \"marmosets\":\n      \n      fs.style.visibility = \"visible\";\n      ki0.style.visibility = \"visible\";\n      ki1.style.visibility = \"hidden\";\n      ki2.style.visibility = \"hidden\";\n      goBtn.style.visibility = \"visible\";\n\n      resetPlaceholder();\n      removeElementsByClassName(\"field-options\");\n\n      let nameMarmosets = document.createElement(\"option\");\n      nameMarmosets.setAttribute(\"class\", \"field-options\");\n      nameMarmosets.setAttribute(\"value\", \"name\");\n      nameMarmosets.setAttribute(\"selected\", \"true\");\n      nameMarmosets.textContent = \"name\";\n\n      let sexMarmosets = document.createElement(\"option\");\n      sexMarmosets.setAttribute(\"class\", \"field-options\");\n      sexMarmosets.setAttribute(\"value\", \"sex\");\n      sexMarmosets.textContent = \"sex\";\n\n      let rfidMarmosets = document.createElement(\"option\");\n      rfidMarmosets.setAttribute(\"class\", \"field-options\");\n      rfidMarmosets.setAttribute(\"value\", \"rfid\");\n      rfidMarmosets.textContent = \"RFID\";\n\n      let breedingMarmosets = document.createElement(\"option\");\n      breedingMarmosets.setAttribute(\"class\", \"field-options\");\n      breedingMarmosets.setAttribute(\"value\", \"breeding\");\n      breedingMarmosets.textContent = \"breeding\";\n\n      let birthdateMarmosets = document.createElement(\"option\");\n      birthdateMarmosets.setAttribute(\"class\", \"field-options\");\n      birthdateMarmosets.setAttribute(\"value\", \"birthdate\");\n      birthdateMarmosets.textContent = \"birthdate\";\n\n      let fieldSelectorMarmosets\n        = document.querySelector(\"#field-selector\") as HTMLSelectElement;\n      fieldSelectorMarmosets.appendChild(nameMarmosets);\n      fieldSelectorMarmosets.appendChild(sexMarmosets);\n      fieldSelectorMarmosets.appendChild(rfidMarmosets);\n      fieldSelectorMarmosets.appendChild(breedingMarmosets);\n      fieldSelectorMarmosets.appendChild(birthdateMarmosets);\n      fieldSelectorMarmosets.dispatchEvent(new Event(\"change\"));\n  \n      break;\n\n    case \"mkturkdata\":\n      fs.style.visibility = \"visible\";\n      ki0.style.visibility = \"visible\";\n      ki1.style.visibility = \"visible\";\n      ki2.style.visibility = \"hidden\";\n      goBtn.style.visibility = \"visible\";\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n\n      resetPlaceholder();\n      removeElementsByClassName(\"field-options\");\n\n      let agentTypeCurDate = document.createElement(\"option\");\n      agentTypeCurDate.setAttribute(\"class\", \"field-options\");\n      agentTypeCurDate.setAttribute(\"value\", \"agentTypeCurDate\");\n      agentTypeCurDate.setAttribute(\"selected\", \"true\");\n      agentTypeCurDate.textContent = \"Agent & CurrentDate\";\n\n      let fieldSelectorMkturk \n        = document.querySelector(\"#field-selector\") as HTMLSelectElement;\n      fieldSelectorMkturk.appendChild(agentTypeCurDate);\n      fieldSelectorMkturk.dispatchEvent(new Event(\"change\"));\n\n      break;\n\n    case \"objects\":\n      fs.style.visibility = \"visible\";\n      ki0.style.visibility = \"visible\";\n      ki1.style.visibility = \"hidden\";\n      ki2.style.visibility = \"hidden\";\n      goBtn.style.visibility = \"visible\";\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n\n      resetPlaceholder();\n      removeElementsByClassName(\"field-options\");\n\n      let identityObjects = document.createElement(\"option\");\n      identityObjects.setAttribute(\"class\", \"field-options\");\n      identityObjects.setAttribute(\"value\", \"identity\");\n      identityObjects.setAttribute(\"selected\", \"true\");\n      identityObjects.textContent = \"identity\";\n\n      let meshObjects = document.createElement(\"option\");\n      meshObjects.setAttribute(\"class\", \"field-options\");\n      meshObjects.setAttribute(\"value\", \"mesh\");\n      meshObjects.textContent = \"mesh\";\n\n      let nounObjects = document.createElement(\"option\");\n      nounObjects.setAttribute(\"class\", \"field-options\");\n      nounObjects.setAttribute(\"value\", \"noun\");\n      nounObjects.textContent = \"noun\";\n\n      let fieldSelectorObjects\n        = document.querySelector(\"#field-selector\") as HTMLSelectElement;\n      fieldSelectorObjects.appendChild(identityObjects);\n      fieldSelectorObjects.appendChild(meshObjects);\n      fieldSelectorObjects.appendChild(nounObjects);\n      fieldSelectorObjects.dispatchEvent(new Event(\"change\"));\n\n      break;\n\n    case \"mkdailydata\":\n      // let ret = mkq.decodeQuery(db.collection('mkdailydata'));\n      let ret = mkq.decodeQuery(collection(db, 'mkdailydata'));\n      ret.then(docs => {\n        mkf.listFirestoreDocs(docs, 'mkdailydata');\n      });\n\n      break;\n\n    // case \"mkdailydatatest\":\n    //   let retTest = mkq.decodeQuery(db.collection('mkdailydatatest'));\n    //   retTest.then(docs => {\n    //     mkf.listFirestoreDocs(docs, 'mkdailydatatest');\n    //   });\n\n    //   break;\n\n    case \"mkturkfiles\":\n      fs.style.visibility = \"hidden\";\n      ki0.style.visibility = \"hidden\";\n      ki1.style.visibility = \"hidden\";\n      ki2.style.visibility = \"hidden\";\n      goBtn.style.visibility = \"hidden\";\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n\n      removeElementsByClassName(\"field-options\");\n      if (isRoot) {\n        mkf.listStorageFiles(rootRef);\n      }\n      break;\n\n    case \"devices\":\n      fs.style.visibility = \"hidden\";\n      ki0.style.visibility = \"hidden\";\n      ki1.style.visibility = \"hidden\";\n      ki2.style.visibility = \"hidden\";\n      goBtn.style.visibility = \"hidden\";\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n\n      resetPlaceholder();\n      removeElementsByClassName(\"field-options\");\n\n      // queryResult = mkq.decodeQuery(db.collection(\"devices\"));\n      queryResult = mkq.decodeQuery(collection(db, 'devices'));\n      queryResult.then(docs => {\n        mkf.listFirestoreDocs(docs, \"devices\");\n      });\n\n      break;\n\n    case \"eyecalibrations\":\n      console.log('eye');\n      fs.style.visibility = \"hidden\";\n      ki0.style.visibility = \"hidden\";\n      ki1.style.visibility = \"hidden\";\n      ki2.style.visibility = \"hidden\";\n      goBtn.style.visibility = \"hidden\";\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n\n      resetPlaceholder();\n      removeElementsByClassName(\"field-options\");\n\n      // queryResult = mkq.decodeQuery(db.collection(\"eyecalibrations\"));\n      queryResult = mkq.decodeQuery(collection(db, 'eyecalibrations'));\n      queryResult.then(docs => {\n        mkf.listFirestoreDocs(docs, \"eyecalibrations\");\n      });\n\n      break;\n\n    case \"mkscale\":\n      fs.style.visibility = \"visible\";\n      ki0.style.visibility = \"visible\";\n      ki1.style.visibility = \"visible\";\n      ki2.style.visibility = \"hidden\";\n      goBtn.style.visibility = \"visible\";\n      plotX.style.visibility = \"visible\";\n      plotY.style.visibility = \"visible\";\n      plotBtn.style.visibility = \"visible\";\n\n      resetPlaceholder();\n      removeElementsByClassName(\"field-options\");\n\n      let nameCurDate = document.createElement(\"option\");\n      nameCurDate.setAttribute(\"class\", \"field-options\");\n      nameCurDate.setAttribute(\"value\", \"nameCurDate\");\n      nameCurDate.setAttribute(\"selected\", \"true\");\n      nameCurDate.textContent = \"Name & CurrentDate\";\n\n      fs.appendChild(nameCurDate);\n      fs.dispatchEvent(new Event(\"change\"));\n\n      break;\n\n    case \"eyedata\":\n      fs.style.visibility = \"visible\";\n      ki0.style.visibility = \"visible\";\n      ki1.style.visibility = \"visible\";\n      ki2.style.visibility = \"hidden\";\n      goBtn.style.visibility = \"visible\";\n      plotX.style.visibility = \"visible\";\n      plotY.style.visibility = \"visible\";\n      plotBtn.style.visibility = \"visible\";\n\n      resetPlaceholder();\n      removeElementsByClassName(\"field-options\");\n\n      let bqAgentDate = document.createElement(\"option\");\n      bqAgentDate.setAttribute(\"class\", \"field-options\");\n      bqAgentDate.setAttribute(\"value\", \"nameCurDate\");\n      bqAgentDate.setAttribute(\"selected\", \"true\");\n      bqAgentDate.textContent = \"Name & CurrentDate\";\n\n      fs.appendChild(bqAgentDate);\n      fs.dispatchEvent(new Event(\"change\"));\n      break;\n  }\n});\n\n\nfieldSelector?.addEventListener(\"change\", ev => {\n  let field = fieldSelector?.value;\n  let ki0 = document.querySelector(\"#keyword-input-0\") as HTMLInputElement;\n  let ki1 = document.querySelector(\"#keyword-input-1\") as HTMLInputElement;\n  let ki2 = document.querySelector(\"#keyword-input-2\") as HTMLInputElement;\n  let plotX = document.querySelector(\"#quick-plot-x\") as HTMLSelectElement;\n  let plotY = document.querySelector(\"#quick-plot-y\") as HTMLSelectElement;\n  let plotBtn = document.querySelector(\"#plot-btn\") as HTMLButtonElement;\n\n\n  switch (field) {\n    case \"name\":\n      resetPlaceholder();\n      ki0.setAttribute(\"placeholder\", \"name\");\n      plotX.style.visibility = \"visible\";\n      plotY.style.visibility = \"visible\";\n      plotBtn.style.visibility = \"visible\";\n      break;\n\n    case \"sex\":\n      resetPlaceholder();\n      ki0.setAttribute(\"placeholder\", \"sex\");\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n      break;\n\n    case \"rfid\":\n      resetPlaceholder();\n      ki0.setAttribute(\"placeholder\", \"RFID\");\n      plotX.style.visibility = \"visible\";\n      plotY.style.visibility = \"visible\";\n      plotBtn.style.visibility = \"visible\";\n      break;\n\n    case \"breeding\":\n      resetPlaceholder();\n      ki0.setAttribute(\"placeholder\", \"breeding\");\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n      break;\n\n    case \"birthdate\":\n      resetPlaceholder();\n      ki0.setAttribute(\n        \"placeholder\", \"birthdate (e.g. 04/17/2019; +-7)\"\n      );\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n      break;\n\n    case \"agentTypeCurDate\":\n      ki0.setAttribute(\"placeholder\", \"Agent\");\n      ki1.setAttribute(\n        \"placeholder\", \"CurrentDate (e.g. 04/17/2019; +-7)\"\n      );\n      plotX.style.visibility = \"hidden\";\n      plotY.style.visibility = \"hidden\";\n      plotBtn.style.visibility = \"hidden\";\n      break;\n\n    case \"nameCurDate\":\n      ki0.setAttribute(\"placeholder\", \"Name\");\n      ki1.setAttribute(\n        \"placeholder\", \"CurrentDate (e.g. 04/17/2019; +-7)\"\n      );\n      break;\n    \n    case \"eyedata\":\n      ki0.setAttribute(\"placeholder\", \"Agent\");\n      ki1.setAttribute(\n        \"Placeholder\", \"Date (e.g. 04/17/2019)\"\n      );\n      break;\n  }\n});\n\nlet queryForm = document.querySelector<HTMLFormElement>(\"#mkquery-form\");\nqueryForm?.addEventListener(\"submit\", async ev => {\n  ev.preventDefault();\n  console.log(\"test weird\");\n  let qryLoc = qryLocSelc?.value;\n  let field = fieldSelector?.value;\n  let k0 = document.querySelector<HTMLInputElement>(\"#keyword-input-0\")?.value;\n  let k1 = document.querySelector<HTMLInputElement>(\"#keyword-input-1\")?.value;\n  let k2 = document.querySelector<HTMLInputElement>(\"#keyword-input-2\")?.value;\n\n  let queryParam: { field: string, keyword: string}[] = [];\n  let queryStr: string = \"\";\n  let queryResult: Query;\n\n\n  switch(qryLoc) {\n    case \"marmosets\":\n      if (k0) {\n        queryParam.push({ field: field, keyword: k0 });\n      } else {\n        console.error(\"No query arguments!\");\n        alert(\"No query arguments!\");\n      }\n      queryResult = query(collection(db, 'marmosets'), where(queryParam[0].field, '==', queryParam[0].keyword));\n      // queryStr = \"db.collection('marmosets')\" + mkq.mkquery(queryParam);\n      // queryStr = \"query(collection(db, 'marmosets')\"\n      queryStr = `query(collection(db, 'marmosets'), ${mkq.mkquery(queryParam)})`;\n      break;\n\n    case \"mkturkdata\":\n      if (k0) {\n        queryParam.push({ field: \"Agent\", keyword: k0});\n      }\n      // if (k1) {\n      //   queryParam.push({ field: \"Doctype\", keyword: k1 });\n      // }\n      if (k1) {\n        queryParam.push({ field: \"CurrentDate\", keyword: k1 });\n      }\n\n      if (queryParam.length == 0) {\n        console.error('No query arguments!');\n        alert('No query arguments!');\n      } else if (queryParam.length == 1) {\n        queryResult = query(collection(db, 'mkturkdata'), where(queryParam[0].field, '==', queryParam[0].keyword));\n      } else if (queryParam.length == 2) {\n        queryResult = query(\n          collection(db, 'mkturkdata'),\n          where(queryParam[0].field, '==', queryParam[0].keyword),\n          where(queryParam[1].field, '==', queryParam[1].keyword)\n        );\n      } else if (queryParam.length == 3) {\n        queryResult = query(\n          collection(db, 'mkturkdata'),\n          where(queryParam[0].field, '==', queryParam[0].keyword),\n          where(queryParam[1].field, '==', queryParam[1].keyword),\n          where(queryParam[2].field, '==', queryParam[2].keyword)\n        );\n      }\n\n      if (queryParam.length > 0) {\n        queryStr = \"db.collection('mkturkdata')\" + mkq.mkquery(queryParam);\n      } else {\n        console.error(\"No query arguments!\");\n        alert(\"No query arguments!\");\n      }\n      break;\n\n    case \"objects\":\n      if (k0) {\n        queryParam.push({ field: field, keyword: k0 });\n      } else {\n        console.error(\"No query arguments!\");\n        alert(\"No query arguments!\");\n      }\n      queryStr = \"db.collection('objects')\" + mkq.mkquery(queryParam);\n      break;\n\n    case \"mkscale\":\n      if (k0) {\n        queryParam.push({ field: \"Name\", keyword: k0 });\n      }\n      if (k1) {\n        queryParam.push({ field: \"CurrentDate\", keyword: k1 });\n      }\n      \n      if (queryParam.length > 0) {\n        queryStr = \"db.collection('mkscale')\" + mkq.mkquery(queryParam);\n      } else {\n        console.error(\"No query arguments!\");\n        alert(\"No query arguments!\");\n      }\n      break;\n\n    case \"eyedata\":\n      if (k0 && k1) {\n        queryStr = mkq.mkbquery(\"eyedata\", k0, k1);\n      } else {\n        console.error(\"Incorrect query: Need two query arguments!\");\n        alert(\"Incorrect query: Need two query arguments!\");\n      }\n      break;\n  }\n  \n\n  if (queryStr.startsWith('query')) {\n    console.log(queryStr);\n    // query = eval(queryStr);\n    \n    let ret = mkq.decodeQuery(queryResult!);\n    ret.then(docs => {\n      mkf.listFirestoreDocs(docs, qryLoc!);\n      if (rfidToggle.checked) {\n        mkf.finder.selectRow();\n        mkf.mke.displayFirebaseTextFile(mkf.finder.getData()[0], \"marmosets\");\n      }\n    });\n  }\n\n  else if (queryStr.startsWith('SELECT *')) {\n    let test = mkq.decodeBigQuery(queryStr);\n    console.log(test);\n    test.then((data: any) => {\n      if (Array.isArray(data.data)) {\n        mkf.listBigQueryTable(data.data, qryLoc, k0!);\n      }\n      // mkf.listBigQueryTable(data.data, qryLoc, k0!);\n    })\n  }\n  \n});\n\nfunction resetPlaceholder() {\n  let keywordInputs = \n    [...document.querySelectorAll<HTMLInputElement>(\".keyword-input\")];\n\n  for (let i = 0; i < keywordInputs.length; i++) {\n    keywordInputs[i].placeholder = \"\";\n    keywordInputs[i].value = \"\";\n  }\n}\n\nfunction removeElementsByClassName(cName: string) {\n  let elements = document.getElementsByClassName(cName);\n  while (elements.length > 0) {\n    elements[0].parentNode?.removeChild(elements[0]);\n  }\n}","import { getApp } from \"firebase/app\";\nimport { getFirestore, Timestamp } from \"firebase/firestore\";\n// type Timestamp = firebase.firestore.Timestamp;\nimport { Mkeditor, Mkthree, Mkimage, Mkchart } from \"./mkmedia\";\nimport FileSaver from \"file-saver\";\nimport { FirebaseStorage, StorageReference, getStorage, ref, listAll, getDownloadURL, getMetadata } from \"firebase/storage\";\n\nconst db = getFirestore();\n\nexport class Mkfinder {\n  finder: Tabulator;\n  mke: Mkeditor;\n  previousPath: string;\n  storage: FirebaseStorage;\n  storageRef: StorageReference;\n  backBtn: HTMLButtonElement;\n  downloadBtn: HTMLButtonElement;\n  mkt: Mkthree;\n  mki: Mkimage;\n  mkc: Mkchart;\n  numImgSlider: HTMLInputElement;\n  showImagesBtn: HTMLButtonElement;\n  selectedImages: any[];\n  pathName: HTMLParagraphElement;\n\n\n  constructor() {\n    this.finder = new Tabulator(\"#finder\");\n    this.previousPath = \"\";\n    this.storage = getStorage(getApp());\n    this.storageRef = ref(this.storage);\n    this.selectedImages = [];\n\n    this.backBtn = document.querySelector(\"#back-btn\") as HTMLButtonElement;\n    this.showImagesBtn = \n    document.querySelector(\"#show-images-btn\") as HTMLButtonElement;\n    this.numImgSlider = \n    document.querySelector(\"#num-image-slider\") as HTMLInputElement;\n    this.downloadBtn =\n    document.querySelector(\"#download-file\") as HTMLButtonElement;\n    this.pathName = \n    document.querySelector(\"#path-name-span\") as HTMLParagraphElement;\n    \n    this.backBtnAction();\n    this.showImagesBtnAction();\n    this.numImgSliderAction();\n    this.downloadBtnAction();\n    this.refreshStorageTable();\n\n    this.mkt = new Mkthree();\n    this.mki = new Mkimage();\n    this.mke = new Mkeditor();\n    this.mkc = new Mkchart();\n\n\n  }\n\n  public listFirestoreDocs(dataArr: any[], database: string) {\n    this.displayFirestoreTable(dataArr, database);\n  }\n\n  private displayFirestoreTable(dataArr: any[], database: string) {\n    \n    dataArr = this.timestampToDate(dataArr);\n    this.mke.makeActiveBtn.style.display = \"none\";\n    this.mke.storeParamBtn.style.display = 'none';\n    \n\n    if (database == \"marmosets\") {\n      this.finder.destroy();\n      this.pathName.innerText = \"marmosets\";\n      this.finder = new Tabulator(\"#finder\", {\n        data: dataArr,\n        index: \"name\",\n        layout: \"fitColumns\",\n        initialSort: [\n          {column: \"name\", dir: \"asc\"}\n        ],\n        columns: [\n          {title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false},\n          {title: \"Name\", field: \"name\"},\n          {title: \"Sex\", field: \"sex\"},\n          {title: \"DOB\", field: \"birthdate\"},\n          {title: \"RFID\", field: \"rfid\"},\n        ],\n        selectable: true,\n        selectableRangeMode: \"click\",\n        rowClick: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          this.mkc.removeElementsByClassName(\"axis-options\");\n          this.mkc.populateAxisFields(row.getData());\n\n        },\n        rowTap: (event, row) => {\n          event.stopPropagation();\n\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          this.mkc.removeElementsByClassName(\"axis-options\");\n          this.mkc.populateAxisFields(row.getData());\n\n        },\n        tableBuilt: () => {\n          /* selectAllBox function */\n          let selectAllBox \n            = document.querySelector(\"#select-all\") as HTMLInputElement;\n          selectAllBox.addEventListener(\"change\", ev => {\n            if (selectAllBox.checked == true) {\n              this.finder.selectRow();\n            } else {\n              this.finder.deselectRow();\n            }\n          });\n        }\n      });\n    }\n    else if (database == \"mkturkdata\") {\n      this.finder.destroy();\n      this.pathName.innerText = \"mkturkdata\";\n      this.finder = new Tabulator(\"#finder\", {\n        data: dataArr,\n        index: \"index\",\n        layout: \"fitColumns\",\n        initialSort: [\n          {column: \"Agent\", dir: \"asc\"}\n        ],\n        columns: [\n          {title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false},\n          {title: \"Agent\", field: \"Agent\"},\n          {title: \"Doctype\", field: \"Doctype\"},\n          {title: \"CurrentDate\", field: \"CurrentDate\"},\n          {title: \"FirestoreDocRoot\", field: \"FirestoreDocRoot\", visible: false},\n        ],\n        selectable: true,\n        selectableRangeMode: \"click\",\n        rowClick: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          \n        },\n        rowTap: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n        },\n        tableBuilt: () => {          \n          /* selectAllBox function */\n          let selectAllBox \n            = document.querySelector(\"#select-all\") as HTMLInputElement;\n          selectAllBox.addEventListener(\"change\", ev => {\n            if (selectAllBox.checked == true) {\n              this.finder.selectRow();\n            } else {\n              this.finder.deselectRow();\n            }\n          });\n        }\n      });\n    }\n\n    else if (database == \"mkdailydata\") {\n      this.finder.destroy();\n      this.pathName.innerText = \"mkdailydata\";\n      this.finder = new Tabulator(\"#finder\", {\n        data: dataArr,\n        index: \"index\",\n        layout: \"fitColumns\",\n        initialSort: [\n          {column: \"agent\", dir: \"asc\"}\n        ],\n        columns: [\n          {title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false},\n          {title: \"Agent\", field: \"agent\"},\n        ],\n        selectable: true,\n        selectableRangeMode: \"click\",\n        rowClick: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          \n        },\n        rowTap: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n        },\n        tableBuilt: () => {          \n          /* selectAllBox function */\n          let selectAllBox \n            = document.querySelector(\"#select-all\") as HTMLInputElement;\n          selectAllBox.addEventListener(\"change\", ev => {\n            if (selectAllBox.checked == true) {\n              this.finder.selectRow();\n            } else {\n              this.finder.deselectRow();\n            }\n          });\n        }\n      });\n    }\n\n    // else if (database == \"mkdailydatatest\") {\n    //   this.finder.destroy();\n    //   this.pathName.innerText = \"mkdailydatatest\";\n    //   this.finder = new Tabulator(\"#finder\", {\n    //     data: dataArr,\n    //     index: \"index\",\n    //     layout: \"fitColumns\",\n    //     initialSort: [\n    //       {column: \"agent\", dir: \"asc\"}\n    //     ],\n    //     columns: [\n    //       {title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false},\n    //       {title: \"Agent\", field: \"agent\"},\n    //     ],\n    //     selectable: true,\n    //     selectableRangeMode: \"click\",\n    //     rowClick: (event, row) => {\n    //       event.stopPropagation();\n    //       this.mkt.destroy();\n    //       this.mki.removeImages();\n\n    //       this.mke.editorDivElement.style.zIndex = \"3\";\n    //       this.mki.imgCanvasDiv.style.zIndex = \"2\";\n    //       this.mkt.canvas.style.zIndex = \"1\";\n    //       this.mke.displayFirebaseTextFile(row.getData(), database);\n          \n    //     },\n    //     rowTap: (event, row) => {\n    //       event.stopPropagation();\n    //       this.mkt.destroy();\n    //       this.mki.removeImages();\n\n    //       this.mke.editorDivElement.style.zIndex = \"3\";\n    //       this.mki.imgCanvasDiv.style.zIndex = \"2\";\n    //       this.mkt.canvas.style.zIndex = \"1\";\n    //       this.mke.displayFirebaseTextFile(row.getData(), database);\n    //     },\n    //     tableBuilt: () => {          \n    //       /* selectAllBox function */\n    //       let selectAllBox \n    //         = document.querySelector(\"#select-all\") as HTMLInputElement;\n    //       selectAllBox.addEventListener(\"change\", ev => {\n    //         if (selectAllBox.checked == true) {\n    //           this.finder.selectRow();\n    //         } else {\n    //           this.finder.deselectRow();\n    //         }\n    //       });\n    //     }\n    //   });\n    // }\n\n    else if (database == \"objects\") {\n      this.finder.destroy();\n      this.pathName.innerText = \"objects\";\n      this.finder = new Tabulator(\"#finder\", {\n        data: dataArr,\n        index: \"docname\",\n        layout: \"fitColumns\",\n        initialSort: [\n          {column: \"identity\", dir: \"asc\"}\n        ],\n        columns: [\n          {title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false},\n          {title: \"Identity\", field: \"identity\"},\n          {title: \"Mesh\", field: \"mesh\"},\n          {title: \"Noun\", field: \"noun\"},\n          {title: \"Meshfile\", field: \"meshfile\"},\n          {title: \"MeshfilePath\", field: \"meshfilepath\"},\n        ],\n        selectable: true,\n        selectableRangeMode: \"click\",\n        rowClick: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          \n        },\n        rowTap: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n        },\n        tableBuilt: () => {          \n          /* selectAllBox function */\n          let selectAllBox \n            = document.querySelector(\"#select-all\") as HTMLInputElement;\n          selectAllBox.addEventListener(\"change\", ev => {\n            if (selectAllBox.checked == true) {\n              this.finder.selectRow();\n            } else {\n              this.finder.deselectRow();\n            }\n          });\n        }\n      });\n    }\n\n    else if (database == \"devices\") {\n      this.finder.destroy();\n      this.pathName.innerText = \"devices\";\n      this.finder = new Tabulator(\"#finder\", {\n        data: dataArr,\n        index: \"docname\",\n        layout: \"fitColumns\",\n        initialSort: [\n          {column: \"model\", dir: \"asc\"}\n        ],\n        columns: [\n          {title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false},\n          {title: \"Model\", field: \"model\"},\n          {title: \"Brand\", field: \"brand\"},\n          {title: \"Type\", field: \"type\"},\n          {title: \"PPI\", field: \"ppi\"},\n        ],\n        selectable: true,\n        selectableRangeMode: \"click\",\n        rowClick: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          \n        },\n        rowTap: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n        },\n        tableBuilt: () => {          \n          /* selectAllBox function */\n          let selectAllBox \n            = document.querySelector(\"#select-all\") as HTMLInputElement;\n          selectAllBox.addEventListener(\"change\", ev => {\n            if (selectAllBox.checked == true) {\n              this.finder.selectRow();\n            } else {\n              this.finder.deselectRow();\n            }\n          });\n        }\n      });\n    }\n\n    else if (database == \"eyecalibrations\") {\n      this.finder.destroy();\n      this.pathName.innerText = \"eyecalibrations\";\n      this.finder = new Tabulator(\"#finder\", {\n        data: dataArr,\n        index: \"Taskdoc\",\n        layout: \"fitColumns\",\n        initialSort: [\n          {column: \"Agent\", dir: \"asc\"}\n        ],\n        columns: [\n          {title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false},\n          {title: \"Agent\", field: \"Agent\"},\n          {title: \"CurrentDate\", field: \"CurrentDate\"},\n        ],\n        selectable: true,\n        selectableRangeMode: \"click\",\n        rowClick: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          \n        },\n        rowTap: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n        },\n        tableBuilt: () => {          \n          /* selectAllBox function */\n          let selectAllBox \n            = document.querySelector(\"#select-all\") as HTMLInputElement;\n          selectAllBox.addEventListener(\"change\", ev => {\n            if (selectAllBox.checked == true) {\n              this.finder.selectRow();\n            } else {\n              this.finder.deselectRow();\n            }\n          });\n        }\n      });\n    }\n\n    else if (database == \"mkscale\") {\n      this.finder.destroy();\n      this.pathName.innerText = \"mkscale\";\n      this.finder = new Tabulator(\"#finder\", {\n        data: dataArr,\n        index: \"Docname\",\n        layout: \"fitColumns\",\n        initialSort: [\n          {column: \"CurrentDate\", dir: \"asc\"}\n        ],\n        columns: [\n          {title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false},\n          {title: \"Name\", field: \"Name\"},\n          {title: \"CurrentDate\", field: \"CurrentDate\"},\n        ],\n        selectable: true,\n        selectableRangeMode: \"click\",\n        rowClick: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          this.mkc.populateAxisFields(row.getData());\n          \n        },\n        rowTap: (event, row) => {\n          event.stopPropagation();\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n          this.mke.displayFirebaseTextFile(row.getData(), database);\n          this.mkc.populateAxisFields(row.getData());\n        },\n        tableBuilt: () => {          \n          /* selectAllBox function */\n          let selectAllBox \n            = document.querySelector(\"#select-all\") as HTMLInputElement;\n          selectAllBox.addEventListener(\"change\", ev => {\n            if (selectAllBox.checked == true) {\n              this.finder.selectRow();\n            } else {\n              this.finder.deselectRow();\n            }\n          });\n        }\n      });\n    }\n\n    else {\n      console.error(\"Wrong or Invalid database trying to be tabularized\");\n    }\n  }\n  \n  private timestampToDate(dataArr: any[]) {\n    function _timestampToDate(element: Timestamp, idx: number, arr: any[]) {\n      try {\n        arr[idx] = element.toDate().toJSON();\n      } catch {\n\n      }\n    }\n\n    console.time(\"Timestamp Conversion\");\n    dataArr.forEach(data => {\n      for (let key of Object.keys(data)) {\n        if (Array.isArray(data[key])) {\n          data[key].forEach(_timestampToDate);\n        }\n  \n        else if (this.isDict(data[key])) {\n          try {\n            data[key] = data[key].toDate().toJSON();\n            continue;\n          } catch (e) {\n            // console.log(e);\n          }\n  \n          for (let key2 of Object.keys(data[key])) {\n            try {\n              data[key][key2] = data[key][key2].toDate().toJSON();\n            } catch {\n              // console.log(\"Not Timestamp Object\");\n            }\n          }\n        }\n        else if (!this.isString(data[key]) && !this.isNumber(data[key])) {\n          try {\n            data[key] = data[key].toDate().toJSON();\n          } catch {\n            // console.log(\"Not Timestamp Object\");\n          }\n        }\n      }\n    });\n    console.timeEnd(\"Timestamp Conversion\");\n\n    return dataArr;\n  }\n\n  private isDict(val: any) {\n    return val && typeof val === \"object\" && val.constructor === Object;\n  }\n\n  private isString(val: any) {\n    return typeof val === \"string\" || val.constructor === String;\n  }\n\n  private isNumber(val: any) {\n    return typeof val === \"number\" && isFinite(val);\n  }\n\n  public async listStorageFiles(fileRef: StorageReference) {\n\n    function formatFileSize(size: number) {\n      let threshold = 1000;\n      if (Math.abs(size) < threshold) {\n        return size + \" B\";\n      }\n\n      let units = [\"kB\", \"MB\", \"GB\", \"TB\"];\n      let u = -1;\n\n      do {\n        size /= threshold;\n        ++u;\n      } while (Math.abs(size) >= threshold && u < units.length -1);\n      return size.toFixed(1) + \" \" + units[u]; \n    }\n    \n    async function loadMetadata(fileArr: any) {\n\n      await getMetadata(fileArr).then((md: any) => {\n        mdArr.push({\n          name: md.name,\n          contentType: md.contentType,\n          fullPath: md.fullPath,\n          size: formatFileSize(md.size),\n          timeCreated: md.timeCreated\n        });\n      });\n\n\n      // await fileArr.getMetadata().then((md: any) => {\n      //   mdArr.push({\n      //     name: md.name,\n      //     contentType: md.contentType,\n      //     fullPath: md.fullPath,\n      //     size: formatFileSize(md.size),\n      //     timeCreated: md.timeCreated\n      //   });\n      // });\n    }\n\n    this.backBtn.disabled = (fileRef.fullPath == \"mkturkfiles\") ? true: false;\n\n    if (fileRef.fullPath == \"mkturkfiles/parameterfiles/params_storage\") {\n      this.mke.storeParamBtn.style.display = 'none';\n      // this.mke.genBtn.style.display = 'none';\n      this.mke.paramGenBtnBox.style.display = 'none';\n      // this.mke.genSceneParamBtn.style.display = 'none';\n      this.mke.svSceneBtn.style.display = 'none';\n      this.mke.makeActiveBtn.style.display = 'inline-block';\n      this.mke.updateBtn.style.display = 'inline-block';\n      this.mke.btnBoxDiv.style.gridTemplateAreas = '\"update-btn active-btn\"';\n    } else if (fileRef.fullPath == 'mkturkfiles/parameterfiles/subjects') {\n      this.mke.makeActiveBtn.style.display = 'none';\n      // this.mke.genBtn.style.display = 'none';\n      this.mke.paramGenBtnBox.style.display = 'none';\n      this.mke.svSceneBtn.style.display = 'none';\n      this.mke.updateBtn.style.display = 'inline-block';\n      this.mke.storeParamBtn.style.display = 'inline-block';\n      this.mke.btnBoxDiv.style.gridTemplateAreas = '\"update-btn store-param-btn\"';\n    } else if (fileRef.fullPath == 'mkturkfiles/scenebags/objectome3d/templates') {\n      this.mke.makeActiveBtn.style.display = 'none';\n      this.mke.storeParamBtn.style.display = 'none';\n      this.mke.svSceneBtn.style.display = 'none';\n      // this.mke.genBtn.style.display = 'inline-block';\n      this.mke.paramGenBtnBox.style.display = 'inline-block';\n      this.mke.updateBtn.style.display = 'inline-block';\n      this.mke.btnBoxDiv.style.gridTemplateAreas = '\"param-gen-btn-box update-btn\"';\n    } else {\n      this.mke.makeActiveBtn.style.display = 'none';\n      this.mke.storeParamBtn.style.display = 'none';\n      // this.mke.genBtn.style.display = 'none';\n      this.mke.paramGenBtnBox.style.display = 'none';\n      this.mke.svSceneBtn.style.display = 'none';\n      this.mke.updateBtn.style.display = 'inline-block';\n      this.mke.btnBoxDiv.style.gridTemplateAreas = '\"update-btn update-btn\"';\n    }\n\n    this.pathName.innerText = fileRef.fullPath;\n\n    let pathArr: string[] = fileRef.fullPath.split(\"/\");\n    let mdArr = new Array();\n    let fileList = await listAll(fileRef);\n    let filePromise: any;\n\n    /* Resolve previous path */\n    this.previousPath = \"\";\n    for (let i = 0; i < pathArr.length -1; i++) {\n      this.previousPath += pathArr[i] + \"/\";\n    }\n\n    /* Resolve metadata of all folders */\n    fileList.prefixes.forEach(folder => {\n      mdArr.push({\n        name: folder.name,\n        contentType: \"folder\",\n        fullPath: folder.fullPath,\n        size: \"N/A\"\n      });\n    });\n\n    /* Resolve metadata of all files */\n    filePromise = fileList.items.map(loadMetadata);\n    await Promise.all(filePromise);\n\n    this.displayStorageTable(mdArr);\n  }\n\n  private refreshStorageTable() {\n    document.addEventListener('storageFileChanged', (ev: Event) => {\n      let folderRef = this.mke.getActiveFile().id as StorageReference;\n      this.listStorageFiles(folderRef.parent!);\n    });\n  }\n\n  private displayStorageTable(metadataArr: any[]) {\n    this.finder.destroy();\n    this.finder = new Tabulator(\"#finder\", {\n      data: metadataArr,\n      index: \"name\",\n      responsiveLayout: true,\n      layout: \"fitColumns\",\n      resizableColumns: true,\n      initialSort: [\n        { column: \"name\", dir: \"asc\" }\n      ],\n      columns: [\n        { title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false },\n        { title: \"Name\", field: \"name\", widthGrow: 3 },\n        { title: \"Type\", field: \"contentType\" },\n        { title: \"Path\", field: \"fullPath\" },\n        { title: \"Size\", field: \"size\" },\n      ],\n      selectable: true,\n      selectableRangeMode: \"click\",\n      rowDblClick: (ev, row) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        if (row.getData().contentType === \"folder\") {\n          console.log(\"rowDblClick\", row.getData().fullPath);\n          // this.listStorageFiles(this.storageRef.child(row.getData().fullPath));\n          this.listStorageFiles(ref(this.storageRef, row.getData().fullPath));\n        }\n      },\n      rowDblTap: (ev, row) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        if (row.getData().contentType === \"folder\") {\n          console.log(row.getData().fullPath);\n          // this.listStorageFiles(this.storageRef.child(row.getData().fullPath));\n          this.listStorageFiles(ref(this.storageRef, row.getData().fullPath));\n        }\n      },\n      rowClick: async (ev, row) => {\n        ev.stopPropagation();\n        if (row.getData().contentType === \"folder\") {\n          console.log(\"rowClick\", row.getData().fullPath);\n        }\n\n        else if (row.getData().contentType.includes(\"text\") ||\n                 row.getData().contentType.includes(\"json\")) {\n\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mke.editorDivElement.style.zIndex = \"3\";\n          this.mki.imgCanvasDiv.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n\n          // let fileRef = this.storageRef.child(row.getData().fullPath);\n          let fileRef = ref(this.storageRef, row.getData().fullPath);\n          this.mke.displayStorageTextFile(fileRef);\n        }\n\n        else if (row.getData().contentType.includes(\"image\")) {\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mki.imgCanvasDiv.style.zIndex = \"3\";\n          this.mke.editorDivElement.style.zIndex = \"2\";\n          this.mkt.canvas.style.zIndex = \"1\";\n\n          // let imgRef = this.storageRef.child(row.getData().fullPath);\n          let imgRef = ref(this.storageRef, row.getData().fullPath);\n          let imgName = row.getData().name;\n          this.mki.displayImage(imgRef, imgName);\n        }\n\n        else if (row.getData().contentType === \"application/octet-stream\" && row.getData().name.includes(\".glb\")) {\n          this.mkt.destroy();\n          this.mki.removeImages();\n\n          this.mkt.canvas.style.zIndex = \"3\";\n          this.mke.editorDivElement.style.zIndex = \"2\";\n          this.mki.imgCanvasDiv.style.zIndex = \"1\";\n\n          // let meshRef = this.storageRef.child(row.getData().fullPath);\n          let meshRef = ref(this.storageRef, row.getData().fullPath);\n          this.mkt.displayMesh(meshRef);\n        }\n      },\n      rowSelectionChanged: (data, rows) => {\n        this.showImagesBtn.disabled = !this.imageTypeTest(data);\n        if (this.imageTypeTest(data)) {\n          this.selectedImages = data;\n        }\n      },\n\n      tableBuilt: () => {\n        let selectAllBox = \n          document.querySelector('#select-all') as HTMLInputElement;\n        selectAllBox.addEventListener('change', ev => {\n          if (selectAllBox.checked == true) {\n            this.finder.selectRow();\n          } else {\n            this.finder.deselectRow();\n          }\n        });\n      }\n    });\n  }\n\n  public listBigQueryTable(dataArr: any[], dataset: string, agent: string) {\n    this.displayBigqueryTable(dataArr);\n    this.pathName.innerText = `${dataset}.${agent}`;\n  }\n\n  private displayBigqueryTable(dataArr: any[]) {\n    this.finder.destroy();\n    this.finder = new Tabulator(\"#finder\", {\n      data: dataArr,\n      index: \"timestamp.value\",\n      responsiveLayout: true,\n      layout: \"fitColumns\",\n      resizableColumns: true,\n      initialSort: [\n        { column: \"timestamp.value\", dir: \"asc\" }\n      ],\n      columns: [\n        { title: \"<input id='select-all' type='checkbox'/>\", width: 15, headerSort: false },\n        { title: \"Timestamp\", field: \"timestamp.value\" },\n      ],\n      selectable: true,\n      selectableRangeMode: \"click\",\n      rowClick: async (ev, row) => {\n        ev.stopPropagation();\n        this.mke.displayBigQueryTableRow(row.getData());\n      },\n      rowTap: (ev, row) => {\n        ev.stopPropagation();\n        this.mke.displayBigQueryTableRow(row.getData());\n      },\n      dataLoaded: (data) => {\n        console.log(\"table data\", data);\n        this.mkc.removeElementsByClassName('axis-options');\n        this.mkc.bqPopulateAxisFields(data, 'eyedata');\n      }\n    });\n  }\n\n  /* Mkfinder controls */\n  private backBtnAction() {\n    this.backBtn.addEventListener(\"click\" || \"pointerup\", (ev: Event) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      console.log(\"[backBtn Pressed]: previousPath:\", this.previousPath);\n      // this.listStorageFiles(this.storageRef.child(this.previousPath));\n      this.listStorageFiles(ref(this.storageRef, this.previousPath));\n    });\n  }\n\n  private numImgSliderAction() {\n    this.numImgSlider.addEventListener(\"change\", (ev: Event) => {\n      console.log(this.numImgSlider.value);\n      this.mki.imgCanvas.style.gridTemplateColumns =\n      \"repeat(\" + String(this.numImgSlider.value) + \", minmax(0,1fr))\";\n    });\n  }\n\n  private showImagesBtnAction() {\n    this.showImagesBtn.addEventListener(\"click\" || \"pointerup\", async (ev: Event) => {\n      this.mkt.destroy();\n      this.mki.removeImages();\n\n      this.mki.imgCanvasDiv.style.zIndex = \"3\";\n      this.mke.editorDivElement.style.zIndex = \"2\";\n      this.mkt.canvas.style.zIndex = \"1\";\n\n      for (let i = 0; i < this.selectedImages.length; i++) {\n        // let imgRef = this.storageRef.child(this.selectedImages[i].fullPath);\n        let imgRef = ref(this.storageRef, this.selectedImages[i].fullPath);\n        let imgName = this.selectedImages[i].name;\n        await this.mki.displayImage(imgRef, imgName);\n      }\n    });\n  }\n\n  private imageTypeTest(data: any[]) {\n    if (data.length == 0 || data.length == 1) {\n      return false;\n    } else {\n      for (var i = 0; i < data.length; i++) {\n        if (!data[i].contentType.includes(\"image\")) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n  private downloadBtnAction() {\n    this.downloadBtn.addEventListener(\"click\" || \"pointerup\", \n    async (ev: Event) => {\n      let row = this.finder.getSelectedRows();\n      let qryLoc = \n      document.querySelector(\"#qry-loc-selector\") as HTMLSelectElement;\n\n      if (qryLoc.value == \"mkturkfiles\" && \n          !row[0].getData().contentType.includes(\"folder\")) {\n        for (let i = 0; i < row.length; i++) {\n          // this.storageRef.child(row[i].getData().fullPath).getDownloadURL()\n          // .then(async (url: string) => {\n          //   let file = await (await fetch(url)).blob();\n          //   FileSaver.saveAs(file, row[i].getData().name);\n          // });\n\n          getDownloadURL(ref(this.storageRef, row[i].getData().fullPath))\n            .then(async (url: string) => {\n              let file = await (await fetch(url)).blob();\n              FileSaver.saveAs(file, row[i].getData().name);\n            });\n        }\n      }\n\n      else if (qryLoc.value == \"marmosets\") {\n        for (let i = 0; i < row.length; i++) {\n          let file = row[i].getData();\n          let blob = new Blob(\n            [ JSON.stringify(file, null, 1) ],\n            { type: \"application/json; charset=utf-8\" }\n          );\n          FileSaver.saveAs(blob, file.name + \".json\");\n        }\n      }\n\n      // else if (qryLoc.value == \"mkdailydatatest\") {\n      //   for (let i = 0; i < row.length; i++) {\n      //     let file = row[i].getData();\n      //     let blob = new Blob(\n      //       [ JSON.stringify(file, null, 1) ],\n      //       { type: \"application/json; charset=utf-8\" }\n      //     );\n      //     FileSaver.saveAs(blob, file.agent + \".json\");\n      //   }\n      // }\n\n      else if (qryLoc.value == \"mkdailydata\") {\n        for (let i = 0; i < row.length; i++) {\n          let file = row[i].getData();\n          let blob = new Blob(\n            [ JSON.stringify(file, null, 1) ],\n            { type: \"application/json; charset=utf-8\" }\n          );\n          FileSaver.saveAs(blob, file.agent + \".json\");\n        }\n      }\n\n      else if (qryLoc.value == \"mkturkdata\") {\n        for (let i = 0; i < row.length; i++) {\n          let docName = row[i].getData().FirestoreDocRoot + \"_\" +\n              row[i].getData().Doctype;\n          let file = row[i].getData();\n          let blob = new Blob(\n            [ JSON.stringify(file, null, 1) ],\n            { type: \"application/json; charset=utf-8\" }\n          );\n          FileSaver.saveAs(blob, docName + \".json\");\n        }\n      }\n\n      else if (qryLoc.value == \"devices\") {\n        for (let i = 0; i < row.length; i++) {\n          let file = row[i].getData();\n          let blob = new Blob(\n            [ JSON.stringify(file, null, 1) ],\n            { type: \"application/json; charset=utf-8\" }\n          );\n          FileSaver.saveAs(blob, file.docname + \".json\");\n        }\n      }\n\n      else if (qryLoc.value == \"eyecalibration\") {\n        for (let i = 0; i < row.length; i++) {\n          let file = row[i].getData();\n          let blob = new Blob(\n            [ JSON.stringify(file, null, 1) ],\n            { type: \"application/json; charset=utf-8\" }\n          );\n          FileSaver.saveAs(blob, file.Docname + \".json\");\n        }\n      }\n\n      else if (qryLoc.value == \"mkscale\") {\n        for (let i = 0; i < row.length; i++) {\n          let file = row[i].getData();\n          let blob = new Blob(\n            [ JSON.stringify(file, null, 1) ],\n            { type: \"application/json; charset=utf-8\" }\n          );\n          FileSaver.saveAs(blob, file.Docname + \".json\");\n        }\n      }\n\n      else if (qryLoc.value == \"objects\") {\n        for (let i = 0; i < row.length; i++) {\n          let file = row[i].getData();\n          let blob = new Blob(\n            [ JSON.stringify(file, null, 1) ],\n            { type: \"application/json; charset=utf-8\" }\n          );\n          FileSaver.saveAs(blob, file.docname + \".json\");\n        }\n      }\n    });\n  }\n\n\n}","import { getApp } from \"firebase/app\";\nimport { getFirestore, doc, collection, setDoc, Timestamp } from \"firebase/firestore\";\nimport { getStorage, StorageReference, getDownloadURL, ref, uploadBytes, deleteObject } from \"firebase/storage\";\nimport JSONEditor from \"jsoneditor\";\nimport Viewer from \"viewerjs\";\nimport * as EditorParams from \"./editor-params\";\n\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { BufferGeometryLoader } from \"three\";\nimport {ParseEngine} from './parser'\n\n\ntype FileRef = StorageReference;\nconst db = getFirestore(getApp());\nconst storage = getStorage(getApp());\n\nexport class Mkeditor {\n  public editorDivElement: HTMLDivElement;\n  private editorElement: HTMLDivElement;\n  private editor: JSONEditor;\n  public updateBtn: HTMLButtonElement;\n  public btnBoxDiv: HTMLDivElement;\n  public makeActiveBtn: HTMLButtonElement;\n  public storeParamBtn: HTMLButtonElement;\n  private activeFile: \n    { loc: string, id: string | FileRef };\n  \n  public fileNameInput: HTMLInputElement;\n  private fileRenameBtn: HTMLButtonElement;\n  private fileDupBtn: HTMLButtonElement;\n  private fileDupModal: HTMLDialogElement;\n  // public genSceneParamBtn: HTMLButtonElement;\n  // private genSceneParamModal: HTMLDivElement;\n  public genBtn: HTMLButtonElement;\n  public paramGenBtnBox: HTMLDivElement;\n\n  public expandBtn: HTMLButtonElement;\n  public svSceneBtn: HTMLButtonElement;\n  private pe: ParseEngine;\n  private userEditedSceneParam: Object;\n  private generatedSceneParam: Object;\n\n\n  constructor() {\n    this.editorDivElement \n      = document.querySelector(\"#editor-div\") as HTMLDivElement;\n    this.editorElement = document.querySelector(\"#editor\") as HTMLDivElement;\n    this.editor = new JSONEditor(this.editorElement);\n    this.updateBtn = document.querySelector(\"#update-btn\") as HTMLButtonElement;\n    this.btnBoxDiv = document.querySelector(\"#button-box\") as HTMLDivElement;\n    this.paramGenBtnBox = document.querySelector('#param-gen-btn-box') as HTMLDivElement;\n    this.makeActiveBtn = document.querySelector(\"#active-btn\") as HTMLButtonElement;\n    this.storeParamBtn \n      = document.querySelector('#store-param-btn') as HTMLButtonElement;\n    this.activeFile = { loc: \"\", id: \"\" };\n    this.updateBtnAction();\n    this.makeActiveBtnAction();\n    this.storeParamBtnAction();\n    this.fileNameInput\n      = document.querySelector(\"#file-name-input\") as HTMLInputElement;\n    this.fileRenameBtn\n      = document.querySelector('#file-rename-btn') as HTMLButtonElement;\n    this.fileDupBtn\n      = document.querySelector('#file-dup-btn') as HTMLButtonElement;\n    this.fileDupModal\n      = document.querySelector('#file-dup-modal') as HTMLDialogElement;\n    this.renameBtnAction();\n    this.renameTextFieldAction();\n    this.getActiveFile();\n    this.fileDupBtnAction();\n\n\n    // this.genSceneParamBtn\n    //   = document.querySelector('#gen-scene-param-btn') as HTMLButtonElement;\n    // this.genSceneParamModal\n    //   = document.querySelector('#gen-scene-param-modal') as HTMLDivElement;\n    // this.generateSceneParamModalAction()\n    \n    \n    this.genBtn = document.querySelector('#generate-btn') as HTMLButtonElement;\n    this.expandBtn = document.querySelector('#expand-btn') as HTMLButtonElement;\n    this.svSceneBtn = document.querySelector('#save-scene-param-btn') as HTMLButtonElement;\n    this.genBtnAction();\n    this.svSceneBtnAction();\n    \n    this.pe = new ParseEngine();\n    this.userEditedSceneParam = {};\n    this.generatedSceneParam = {};\n\n  }\n\n  public getActiveFile() {\n    return this.activeFile;\n  }\n\n  public displayFirebaseTextFile(file: Object, loc: string) {\n    this.fileRenameBtn.style.display = 'none';\n    this.fileDupBtn.style.display = 'none';\n    // this.genSceneParamBtn.style.display = 'none';\n    this.storeParamBtn.style.display = 'none';\n    this.updateBtn.style.display = 'inline-block';\n    this.btnBoxDiv.style.gridTemplateAreas = '\"update-btn update-btn\"'\n    this.fileNameInput.value = '';\n    this.fileNameInput.disabled = true;\n\n    try {\n      let options = {\n        modes: ['tree' as 'tree', 'code' as 'code'],\n        sortObjectKeys: true,\n      };\n      this.editor.destroy();\n      this.editor = new JSONEditor(this.editorElement, options, file);\n      this.trackFirebaseActiveFile(loc, file);\n    } catch (error) {\n      console.error(\"JSONEditor Error:\", error);\n    }\n  }\n\n  public displayBigQueryTableRow(data: any) {\n    this.btnBoxDiv.style.display = 'none';\n    try {\n      this.editor.destroy();\n      let options = {\n        modes: ['tree' as 'tree', 'code' as 'code']\n      };\n      this.editor = new JSONEditor(this.editorElement, options, data);\n      this.fileNameInput.placeholder = data.timestamp.value;\n      // console.log(\"displayBigQueryTableRow\", data);\n    } catch (error) {\n      console.error(\"JSONEditor Error:\", error);\n    }\n  }\n\n  private trackFirebaseActiveFile(loc: string, file: any) {\n\n    if (loc === \"marmosets\") {\n      this.activeFile = { loc: loc, id: file.name };\n      this.fileNameInput.placeholder = String(this.activeFile.id);\n    }\n\n    else if (loc === \"mkturkdata\") {\n      if (file.Doctype === \"task\") {\n        this.activeFile = { loc: loc, id: file.Taskdoc };\n        this.fileNameInput.placeholder = String(this.activeFile.id);\n      } else if (file.Doctype === \"images\") {\n        this.activeFile = { loc: loc, id: file.Imagesdoc};\n        this.fileNameInput.placeholder = String(this.activeFile.id);\n      }\n    }\n\n    else if (loc === 'mkdailydata') {\n      this.activeFile = { loc: loc, id: file.agent };\n      this.fileNameInput.placeholder = String(this.activeFile.id);\n    }\n\n    // else if (loc === 'mkdailydatatest') {\n    //   this.activeFile = { loc: loc, id: file.agent };\n    //   this.fileNameInput.placeholder = String(this.activeFile.id);\n    // }\n\n    else if (loc === \"objects\") {\n      this.activeFile = { loc: loc, id: file.docname };\n      this.fileNameInput.placeholder = String(this.activeFile.id);\n    }\n\n    else if (loc === \"eyecalibrations\") {\n      this.activeFile = { loc: loc, id: file.Docname };\n      this.fileNameInput.placeholder = String(this.activeFile.id);\n    }\n\n    else if (loc === \"devices\") {\n      this.activeFile = { loc: loc, id: file.docname };\n      this.fileNameInput.placeholder = String(this.activeFile.id);\n    }\n\n    else if (loc === \"mkscale\") {\n      this.activeFile = { loc: loc, id: file.Docname };\n      this.fileNameInput.placeholder = String(this.activeFile.id);\n    }\n\n    console.log(\"activeFile\", this.activeFile);\n  }\n\n  public async displayStorageTextFile(fileRef: FileRef) {\n    console.log('diplayStorageTextFile FILEREF', fileRef);\n    this.fileNameInput.disabled = false;\n    this.fileRenameBtn.style.display = 'inline-block';\n    this.fileNameInput.value = '';\n\n    const sceneParamPath = 'mkturkfiles/scenebags/objectome3d';\n    const taskParamPath = 'mkturkfiles/parameterfiles';\n\n    function onClassName(classNameParams: {path: ReadonlyArray<string>; field: string; value: string;}) {\n      console.log(`onClassName path=${classNameParams.path}, field=${classNameParams.field}, value=${classNameParams.value}`);\n\n      const bioKeys = ['Agent', 'CheckRFID'];\n      const automatorKeys = [\n        'Automator', 'AutomatorFilePath', 'CurrentAutomatorStage',\n        'MinPercentCriterion', 'MinTrialsCriterion'\n      ];\n      const generalKeys = [\n        'DragtoRespond', 'CalibrateEye', 'NRSVP', 'NRSVPMax', 'SameDifferent',\n        'SamplingStrategy', 'NStickyResponse', 'NTrialsPerBagBlock'\n      ];\n      const gridKeys = [\n        'NGridPoints', 'GridSpacingInches', 'GridXOffsetInches',\n        'GridYOffsetInches', 'FixationGridIndex', 'SampleGridIndex',\n        'ObjectGridIndex', 'ChoiceGridIndex', 'TestGridIndex',\n      ];\n      const fixationKeys = [\n        'NFixations', 'FixationUsesSample', 'FixationSizeInches',\n        'FixationDuration', 'FixationTimeOut',\n      ];\n      const fixationConfigKeys = [\n        'FixationWindowSizeInches',\n        'FixationDotSizeInches',\n      ];\n      const sampleKeys = [\n        'ImageBagsSample', 'KeepSampleON',\n        'SamplePRE', 'SampleOFF',\n      ];\n      const testKeys = [\n        'ImageBagsTest', 'KeepTestON',\n        'TestOFF', 'HideTestDistractors',\n      ];\n      const choiceKeys = [\n        'ChoiceSizeInches', 'HideChoiceDistractors',\n        'ChoiceTimeOut',\n      ];\n      const rewardKeys = [\n        'RewardStage', 'RewardPer1000Trials',\n        'NRewardMax', 'NConsecutiveHitsforBonus',\n        'PunishTimeOut', 'ConsecutiveHitsITI',\n      ];\n      \n      if (bioKeys.includes(classNameParams.field)) {\n        return 'color-node-bio';\n      } else if (automatorKeys.includes(classNameParams.field)) {\n        return 'color-node-automator';\n      } else if (generalKeys.includes(classNameParams.field)) {\n        return 'color-node-general';\n      } else if (gridKeys.includes(classNameParams.field)) {\n        return 'color-node-grid';\n      } else if (fixationKeys.includes(classNameParams.field)) {\n        return 'color-node-fixation';\n      } else if (fixationConfigKeys.includes(classNameParams.field)) {\n        return 'color-node-fixation-config';\n      } else if (sampleKeys.includes(classNameParams.field)) {\n        return 'color-node-sample';\n      } else if (testKeys.includes(classNameParams.field)) {\n        return 'color-node-test';\n      } else if (choiceKeys.includes(classNameParams.field)) {\n        return 'color-node-choice';\n      } else if (rewardKeys.includes(classNameParams.field)) {\n        return 'color-node-reward';\n      } else {\n        return 'color-node-nuisance';\n      }\n    }\n\n    let sceneTemplateOptions = {\n      modes: ['tree' as 'tree', 'code' as 'code'],\n      templates: [\n        {\n          text: 'Camera',\n          title: 'Insert a Camera node',\n          field: 'CameraTemplate',\n          value: {\n            type: 'PerspectiveCamera',\n            fieldOfView: 45,\n            near: 0.1,\n            far: 2000,\n            position: {\n              x: [0],\n              y: [0],\n              z: [0]\n            },\n            targetInches: {\n              x: [0],\n              y: [0],\n              z: [0]\n            },\n            visible: [1]\n          }\n        },\n        {\n          text: 'Light',\n          title: 'Insert a Light node',\n          field: 'LightTemplate',\n          value: {\n            type: 'DirectionalLight',\n            color: '0xffffff',\n            intensity: [5],\n            position: {\n              x: [0],\n              y: [0],\n              z: [0]\n            },\n            visible: [1]\n          }\n        },\n        {\n          text: 'Object',\n          title: 'Insert an Object node',\n          field: 'ObjectTemplate',\n          value: {\n            meshpath: '',\n            objectdoc: '',\n            sizeInches: [0.5],\n            positionInches: {\n              x: [0],\n              y: [0],\n              z: [0]\n            },\n            rotationDegrees: {\n              x: [0],\n              y: [0],\n              z: [0]\n            },\n            material: {\n              type: 'MeshPhysicalMaterial',\n              color: '#7F7F7F',\n              metalness: 0.25,\n              roughness: 0.65,\n              reflectivity: 0.5,\n              opacity: [1],\n              transparent: false\n            },\n            visible: [1],\n            morphTarget: []\n          }\n        },\n        {\n          text: 'Background',\n          title: 'Insert a Background node',\n          field: 'ImagesTemplate',\n          value: {\n            imagebag: '',\n            imageidx: []\n          }\n        }\n      ]\n    }\n\n    let options = {\n      modes: ['tree' as 'tree', 'code' as 'code']\n    }\n\n    let taskParamOptions = {\n      modes: ['tree' as 'tree', 'code' as 'code'],\n      onClassName: onClassName,\n      schema: EditorParams.taskParamSchema\n    };\n\n    // let fileUrl = await getDownloadURL(fileRef).catch(e => {\n    //   console.error('Error getting download URL:', e);\n    // });\n\n    // let response;\n    // let file;\n\n    let file = await getDownloadURL(fileRef)\n      .then(async (url: string) => {\n        let response = await fetch(url);\n        return await response.json();\n      }).catch((e: Error) => {\n        console.error('Error getting download URL:', e);\n      });\n\n    // let fileUrl = await fileRef.getDownloadURL().catch(e => {\n    //   console.error(\"Error getting download URL\", e);\n    // });\n    // let response = await fetch(fileUrl);\n    // let file = await response.json();\n\n    if (fileRef.fullPath.includes(sceneParamPath)) {\n      if (fileRef.fullPath.includes('template')) {\n        this.fileDupBtn.style.display = 'inline-block';\n        // this.genSceneParamBtn.style.display = 'inline-block';\n        options = sceneTemplateOptions;\n      } else {\n        this.fileDupBtn.style.display = 'inline-block';\n        // this.genSceneParamBtn.style.display = 'none';\n      }\n    } else if (fileRef.fullPath.includes(taskParamPath)) {\n      console.log('FILEEEE:', file);\n      this.fileDupBtn.style.display = 'inline-block';\n      let taskParamKeys = Object.keys(JSON.parse(JSON.stringify(EditorParams.taskParamSchema, null, 1)).properties);\n      if (Array.isArray(file)) { // CASE: Automator\n        \n        for (let idx in file) {\n          let json = JSON.parse(JSON.stringify(file[idx], taskParamKeys, 1));\n          let json2: any = {};\n          Object.keys(file[idx]).forEach(key => {\n\n            if (!(key in json)) {\n              json2[key] = file[idx][key];\n            }\n          });\n          file[idx] = Object.assign(json, json2);\n          console.log('json:', json, 'json2:', json2);\n        }\n\n        console.log('FILE AFTER PROCESSING:', file);\n\n      } else {\n        let json = JSON.parse(JSON.stringify(file, taskParamKeys, 1));\n        let json2: any = {};\n        Object.keys(file).forEach(key => {\n          if (!(key in json)) {\n            json2[key] = file[key];\n          }\n        });\n        console.log('json:', json, 'json2:', json2);\n        file = Object.assign(json, json2);\n      }\n      options = taskParamOptions;\n      \n      // this.genSceneParamBtn.style.display = 'none';\n    } else {\n      this.fileDupBtn.style.display = 'none';\n      // this.genSceneParamBtn.style.display = 'none';\n    }\n\n    this.editor.destroy();\n    this.editor = new JSONEditor(this.editorElement, options, file);\n    this.activeFile = { loc: \"mkturkfiles\", id: fileRef };\n    console.log(\"activeFile\", this.activeFile);\n    this.fileNameInput.placeholder = fileRef.name;\n  }\n\n  private fileDupBtnAction() {\n    let fileName\n      = this.fileDupModal.querySelector('#dup-file-name') as HTMLInputElement;\n    \n    this.fileDupBtn.addEventListener('click', (ev: Event) => {\n      ev.preventDefault();\n      this.fileDupModal\n      this.fileDupModal.showModal();\n      let activeFileName = this.activeFile.id as FileRef;\n      fileName.value = 'Copy of ' + activeFileName.name;\n      fileName.focus();\n      fileName.select();\n    });\n\n    this.fileDupModal.querySelector('.close')?.addEventListener('click', () => {\n      this.fileDupModal.close();\n    });\n\n    this.fileDupModal.querySelector('.save')?.addEventListener('click', () => {\n      let srcFileRef = this.activeFile.id as FileRef;\n      // let dupFileRef = srcFileRef.parent?.child(fileName.value);\n      let dupFileRef = ref(srcFileRef.parent!, fileName.value)\n      let dupFile = new Blob([JSON.stringify(this.editor.get(), null, 1)]);\n      let md = {\n        contentType: 'application/json'\n      };\n\n      uploadBytes(dupFileRef, dupFile, md).then(async (snapshot) => {\n        console.log('[DOCUMENT DUPLICATED]:', snapshot);\n        alert('Document Duplicated');\n        let fileDupEvent = new Event('storageFileChanged');\n        this.fileNameInput.value = '';\n        this.displayStorageTextFile(dupFileRef);\n        document.dispatchEvent(fileDupEvent);\n      }).catch((e: Error) => {\n        console.error('[DOCUMENT DUPLICATE FAILED]:', e);\n        console.error('srcFile:', srcFileRef, 'destFile:', dupFileRef);\n        alert('Document Duplication Failed');\n      })\n\n      // dupFileRef?.put(dupFile, md).then(async (snapshot) => {\n      //   console.log('[DOCUMENT DUPLICATED]', snapshot);\n      //   alert('Document Duplicated');\n      //   let fileDupEvent = new Event('storageFileChanged');\n      //   this.fileNameInput.value = '';\n      //   this.displayStorageTextFile(dupFileRef!);\n      //   document.dispatchEvent(fileDupEvent);\n      // }).catch(e => {\n      //   console.error('[DOCUMENT DUPLICATE FAILED]:', e);\n      //   console.error('srcFile', srcFileRef, 'dupFile', dupFileRef);\n      //   alert('Document Dup Failed');\n      // });\n\n      this.fileDupModal.close();\n    });\n  }\n\n  private generateSceneParamModalAction() {\n\n    let collapsibles = document.getElementsByClassName('collapsible') as HTMLCollectionOf<HTMLButtonElement>;\n    for (let i = 0; i < collapsibles.length; i++) {\n      let coll = collapsibles[i];\n      coll.addEventListener('click', (ev: Event) => {\n        ev.preventDefault();\n        coll.classList.toggle('active');\n        let content = coll.nextElementSibling as HTMLButtonElement;\n        if (content.style.display === 'block') {\n          content.style.display = 'none';\n        } else {\n          content.style.display = 'block';\n        }\n      })\n    }\n\n    let initDataSize = [\n      {sampling: 'gaussian', params: '0, 1', n: 5}\n    ];\n\n    let rtSize = new Tabulator('#size-inches-table', {\n      data: initDataSize,\n      layout: 'fitColumns',\n      history: true,\n      columns: [\n        {title: 'Sampling', field: 'sampling', editor: 'select', editorParams: {values: ['gaussian', 'uniform', 'range']}},\n        {title: 'Params', field: 'params', editor: 'input', editable: true},\n        {title: 'n || step size', field: 'n', editor: 'input', editable: true}\n      ]\n    });\n\n    let szDiv = document.querySelector('.size-inches') as HTMLDivElement;\n    let addRowSize = szDiv.querySelector('.add-rule-btn') as HTMLButtonElement;\n    let undoSz = szDiv.querySelector('.undo-edit-btn') as HTMLButtonElement\n\n    addRowSize.addEventListener('click', (ev: Event) => {\n      ev.preventDefault();\n      rtSize.addRow({sampling: '', params: '', n: NaN}, false);\n    });\n\n    undoSz.addEventListener('click', (ev: Event) => {\n      rtSize.undo();\n    });\n\n    let initDataPos = [\n      {target: 'x', sampling: 'gaussian', params: '0, 1', n: 5}\n    ];\n\n    let rtPos = new Tabulator('#position-inches-table', {\n      data: initDataPos,\n      layout: 'fitColumns',\n      history: true,\n      columns: [\n        {title: 'Target', field: 'target', editor: 'select', editorParams: {values: ['x', 'y', 'z']}},\n        {title: 'Sampling', field: 'sampling', editor: 'select', editorParams: {values: ['gaussian', 'uniform', 'range']}},\n        {title: 'Params', field: 'params', editor: 'input', editable: true},\n        {title: 'n || step size', field: 'n', editor: 'input', editable: true}\n      ]\n    });\n\n    let posDiv = document.querySelector('.position-inches') as HTMLDivElement;\n    let addRowPos = posDiv.querySelector('.add-rule-btn') as HTMLButtonElement;\n    let undoPos = posDiv.querySelector('.undo-edit-btn') as HTMLButtonElement\n\n    addRowPos.addEventListener('click', (ev: Event) => {\n      ev.preventDefault();\n      rtPos.addRow({target: '', sampling: '', params: '', n: NaN});\n    });\n\n    undoPos.addEventListener('click', (ev: Event) => {\n      rtPos.undo();\n    });\n\n    let initDataDeg = [\n      {target: 'x', sampling: 'gaussian', params: '0, 1', n: 5}\n    ];\n\n    let rtDeg = new Tabulator('#rotation-degrees-table', {\n      data: initDataDeg,\n      layout: 'fitColumns',\n      history: true,\n      columns: [\n        {title: 'Target', field: 'target', editor: 'select', editorParams: {values: ['x', 'y', 'z']}},\n        {title: 'Sampling', field: 'sampling', editor: 'select', editorParams: {values: ['gaussian', 'uniform', 'range']}},\n        {title: 'Params', field: 'params', editor: 'input', editable: true},\n        {title: 'n || step size', field: 'n', editor: 'input', editable: true}\n      ]\n    });\n\n    let degDiv = document.querySelector('.rotation-degrees') as HTMLDivElement;\n    let addRowDeg = degDiv.querySelector('.add-rule-btn') as HTMLButtonElement;\n    let undoDeg = degDiv.querySelector('.undo-edit-btn') as HTMLButtonElement\n\n    addRowDeg.addEventListener('click', (ev: Event) => {\n      ev.preventDefault();\n      rtDeg.addRow({target: '', sampling: '', params: '', n: NaN});\n    });\n\n    undoDeg.addEventListener('click', (ev: Event) => {\n      rtDeg.undo();\n    });\n\n  }\n\n  private renameTextFieldAction() {\n    this.fileNameInput.addEventListener('click', (ev: Event) => {\n      let tmpName = this.activeFile.id as FileRef;\n      let curFileName = tmpName.name;\n      this.fileNameInput.value = curFileName;\n      this.fileNameInput.focus();\n      this.fileNameInput.select();\n    });\n  }\n\n  private renameBtnAction() {\n    this.fileRenameBtn.addEventListener('click', (ev: Event) => {\n      if (this.fileNameInput.value) {\n        let oldFileRef = this.activeFile.id as FileRef;\n        let newFileRef = ref(oldFileRef.parent!, this.fileNameInput.value);\n        // let newFileRef = oldFileRef.parent?.child(this.fileNameInput.value);\n        let newFile = new Blob([JSON.stringify(this.editor.get(), null, 1)]);\n        let md = {\n          contentType: 'application/json'\n        };\n\n        uploadBytes(newFileRef, newFile, md).then(async (snapshot) => {\n          await deleteObject(oldFileRef);\n          console.log('[DOCUMENT RENAMED]:', snapshot);\n          alert('Document Renamed');\n          let renameEvent = new Event('storageFileChanged');\n          this.fileNameInput.value = '';\n          this.displayStorageTextFile(newFileRef!);\n          document.dispatchEvent(renameEvent);\n        }).catch((e: Error) => {\n          console.error('[DOCUMENT RENAME FAILED]:', e);\n          console.error('oldFile', oldFileRef, 'newFile', newFileRef);\n          alert('Document Rename Failed');\n        })\n\n        // newFileRef?.put(newFile, md).then(async (snapshot) => {\n        //   await oldFileRef.delete();\n        //   console.log('[DOCUMENT RENAMED]', snapshot);\n        //   alert('Document Renamed');\n        //   let renameEvent = new Event('storageFileChanged');\n        //   this.fileNameInput.value = '';\n        //   this.displayStorageTextFile(newFileRef!);\n        //   document.dispatchEvent(renameEvent);\n        // }).catch(e => {\n        //   console.error('[DOCUMENT RENAME FAILED]:', e);\n        //   console.error('oldFile', oldFileRef, 'newFile', newFileRef);\n        //   alert('Document Rename Failed');\n        // });\n        \n\n      } else {\n        console.log('file name input field is null');\n      }\n    });\n  }\n\n  private updateBtnAction() {\n    this.updateBtn.addEventListener(\"click\" || \"pointerup\", (ev: Event) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      let loc = this.activeFile.loc;\n\n      if (\n        loc === \"marmosets\" || loc === \"mkturkdata\"\n        || loc === \"devices\" || loc === \"mkscale\"\n        || loc === \"eyecalibrations\" || loc === 'mkdailydata'\n      ) {\n        // handle marmosets && mkturkdata\n        let id = this.activeFile.id as string;\n\n        setDoc(\n          doc(db, loc, id),\n          this.dateToTimestamp(this.editor.get())\n        ).then(() => {\n          console.log(\"[DOCUMENT UPDATED]:\", id);\n          alert(\"Document Updated\");\n        }).catch((e: Error) => {\n          console.error(\"[DOCUMENT UPDATE FAILED]\", \"FILE:\", id, \"ERROR:\", e);\n          alert(\"Document Update Failed\");\n        })\n\n\n        // db.collection(loc).doc(id).set(\n        //   this.dateToTimestamp(this.editor.get())\n        // ).then(() => {\n        //   console.log(\"[DOCUMENT UPDATED]:\", id);\n        //   alert(\"Document Updated\");\n        // }).catch(e => {\n        //   console.error(\"[DOCUMENT UPDATE FAILED]\", \"FILE:\", id, \"ERROR:\", e);\n        //   alert(\"Document Update Failed\");\n        // });\n      }\n\n      else if (this.activeFile.loc === \"mkturkfiles\") {\n        // handle mkturkfiles\n        let id = this.activeFile.id as FileRef;\n        let updatedFile = new Blob([ JSON.stringify(this.editor.get(), null, 1) ]);\n        let metadata = {\n          contentType: \"application/json\"\n        };\n\n        uploadBytes(id, updatedFile, metadata).then(snapshot => {\n          console.log(this.editor.get());\n          console.log(\"[DOCUMENT UPDATED]:\", snapshot.metadata.name);\n          alert(\"Document Updated\");\n          document.dispatchEvent(new Event('storageFileChanged'));\n        }).catch((e: Error) => {\n          console.error(\"[DOCUMENT UPDATE FAILED]\", \"FILE:\", id, \"ERROR:\", e);\n          alert(\"Document Update Failed\");\n        });\n\n\n\n        // id.put(updatedFile, metadata).then(snapshot => {\n        //   console.log(this.editor.get());\n        //   console.log(\"[DOCUMENT UPDATED]:\", snapshot.metadata.name);\n        //   alert(\"Document Updated\");\n        //   document.dispatchEvent(new Event('storageFileChanged'));\n        // }).catch(e => {\n        //   console.error(\"[DOCUMENT UPDATE FAILED]\", \"FILE:\", id, \"ERROR:\", e);\n        //   alert(\"Document Update Failed\");\n        // });\n      }\n\n      else {\n        console.error(\"[DOCUMENT UPDATE FAILED] ERROR: Location Error\");\n      }\n    });\n  }\n\n  private makeActiveBtnAction() {\n    this.makeActiveBtn.addEventListener('click' || 'pointerup', (ev: Event) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      console.log(this.activeFile);\n      let storageRef = ref(storage);\n      let file = this.editor.get();\n      let fileName = \"mkturkfiles/parameterfiles/subjects/\" + file.Agent + \"_params.json\";\n      // let fileRef = storageRef.child(fileName);\n      let fileRef = ref(storageRef, fileName);\n      file = new Blob([ JSON.stringify(file, null, 1) ]);\n      let metadata = {\n        contentType: \"application/json\"\n      };\n\n      uploadBytes(fileRef, file, metadata).then(snapshot => {\n        console.log(\"[PARAM MADE ACTIVE]:\", snapshot.metadata.name);\n        alert(\"Param Active\");\n      }).catch((e: Error) => {\n        console.error(\"[PARAM ACTIVATION FAILED]\", \"FILE:\", fileRef, \"ERROR\", e);\n        alert(\"Param Activation Failed\");\n      });\n\n\n      // fileRef.put(file, metadata).then(snapshot => {\n      //   console.log(\"[PARAM MADE ACTIVE]:\", snapshot.metadata.name);\n      //   alert(\"Param Active\");\n      // }).catch(e => {\n      //   console.error(\"[PARAM ACTIVATION FAILED]\", \"FILE:\", fileRef, \"ERROR\", e);\n      //   alert(\"Param Activation Failed\");\n      // });\n    });\n  }\n\n  private storeParamBtnAction() {\n    this.storeParamBtn.addEventListener('click' || 'pointerup', (ev: Event) => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      console.log(this.activeFile);\n      // let storageRef = storage.ref();\n      let storageRef = ref(storage);\n      let file = this.editor.get();\n      let date = new Date();\n      let fileName = 'mkturkfiles/parameterfiles/params_storage/'\n        + file.Agent + \"_params_\" + date.toJSON().split('T')[0]\n        + '.json';\n      \n      // let fileRef = storageRef.child(fileName);\n      let fileRef = ref(storageRef, fileName);\n\n      file = new Blob([ JSON.stringify(file, null, 1) ]);\n      let metadata = {\n        contentType: 'application/json'\n      };\n\n      uploadBytes(fileRef, file, metadata).then(snapshot => {\n        console.log('[PARAM STORED]:', snapshot.metadata.name);\n        alert('Param stored');\n      }).catch((e: Error) => {\n        console.error('[PARAM STORAGE FAILED]', 'FILE:', fileRef, 'ERROR', e);\n        alert('Param Storage Failed');\n      })\n\n      // fileRef.put(file, metadata).then(snapshot => {\n      //   console.log('[PARAM STORED]:', snapshot.metadata.name);\n      //   alert('Param stored');\n      // }).catch(e => {\n      //   console.error('[PARAM STORAGE FAILED]', 'FILE:', fileRef, 'ERROR', e);\n      //   alert('Param Storage Failed');\n      // });\n    });\n  }\n\n  private genBtnAction() {\n    this.genBtn.addEventListener('click', (ev: Event) => {\n      if (this.genBtn.value == 'generate') {\n        this.userEditedSceneParam = this.editor.get();\n        this.generatedSceneParam = (\n          this.pe.generateParamObject(this.userEditedSceneParam, 'vectorize')\n        );\n        this.editor.destroy();\n        let options = {\n          modes: ['tree' as 'tree', 'code' as 'code']\n        };\n        this.editor = new JSONEditor(this.editorElement, options, this.generatedSceneParam);\n        this.genBtn.value = 'revert';\n        this.genBtn.textContent = 'Revert';\n        this.updateBtn.style.display = 'none';\n        this.svSceneBtn.style.display = 'inline-block';\n        this.btnBoxDiv.style.gridTemplateAreas = '\"param-gen-btn-box sv-scene-param-btn\"';\n      } else if (this.genBtn.value == 'revert') {\n        this.editor.destroy();\n        this.generatedSceneParam = {};\n        let options = {\n          modes: ['tree' as 'tree', 'code' as 'code']\n        };\n        this.editor = new JSONEditor(this.editorElement, options, this.userEditedSceneParam);\n        this.genBtn.value = 'generate';\n        this.genBtn.textContent = 'Vectorize Param';\n        this.svSceneBtn.style.display = 'none';\n        this.updateBtn.style.display = 'inline-block';\n        this.btnBoxDiv.style.gridTemplateAreas = '\"param-gen-btn-box update-btn\"';\n      }\n    });\n\n    this.expandBtn.addEventListener('click', (ev: Event) => {\n      if (this.expandBtn.value == 'expand') {\n        this.userEditedSceneParam = this.editor.get();\n        this.generatedSceneParam = (\n          this.pe.generateParamObject(this.userEditedSceneParam, 'expand')\n        );\n        this.editor.destroy();\n        let options = {\n          modes: ['tree' as 'tree', 'code' as 'code']\n        };\n        this.editor = new JSONEditor(this.editorElement, options, this.generatedSceneParam);\n        this.expandBtn.value = 'revert';\n        this.expandBtn.textContent = 'Revert';\n        this.updateBtn.style.display = 'none';\n        this.svSceneBtn.style.display = 'inline-block';\n        this.btnBoxDiv.style.gridTemplateAreas = '\"param-gen-btn-box sv-scene-param-btn\"';\n      } else if (this.expandBtn.value == 'revert') {\n        this.editor.destroy();\n        this.generatedSceneParam = {};\n        let options = {\n          modes: ['tree' as 'tree', 'code' as 'code']\n        };\n        this.editor = new JSONEditor(this.editorElement, options, this.userEditedSceneParam);\n        this.expandBtn.value = 'expand';\n        this.expandBtn.textContent = 'Expand Param';\n        this.svSceneBtn.style.display = 'none';\n        this.updateBtn.style.display = 'inline-block';\n        this.btnBoxDiv.style.gridTemplateAreas = '\"param-gen-btn-box update-btn\"';\n      }\n    });\n  }\n\n  private svSceneBtnAction() {\n    let modal = document.querySelector('#filename-modal') as HTMLDialogElement;\n    let modalFilename = modal.querySelector('.filename-input') as HTMLInputElement;\n\n    this.svSceneBtn.addEventListener('click', (ev: Event) => {\n      ev.preventDefault();\n      modal.showModal();\n      let activeFileName = this.activeFile.id as FileRef;\n      let now = new Date();\n      modalFilename.value = now.toLocaleDateString('en-CA') + '_' + activeFileName.name;\n      modalFilename.focus();\n      modalFilename.select();\n    });\n\n    modal.querySelector('.cl')?.addEventListener('click', () => {\n      modal.close();\n    });\n\n    modal.querySelector('.sv')?.addEventListener('click', () => {\n      let srcRef = this.activeFile.id as FileRef;\n      // let destRef = srcRef.parent?.parent?.child('generatedParams').child(modalFilename.value);\n      let destRef = ref(srcRef.parent?.parent!, `generatedParams/${modalFilename.value}`);\n      let sceneSrcFileName = (\n        modalFilename.value.split('.')[0] + '_source.' + modalFilename.value.split('.')[1]\n      ); \n      // let sceneSrcDestRef = srcRef.parent?.parent?.child('generatedParams').child(sceneSrcFileName);\n      let sceneSrcDestRef = ref(srcRef.parent?.parent!, `generatedParams/${sceneSrcFileName}`);\n      let file = new Blob([JSON.stringify(this.generatedSceneParam, null, 1)]);\n      let sceneSrcFile = new Blob([JSON.stringify(this.userEditedSceneParam, null, 1)]);\n      let md = {\n        contentType: 'application/json'\n      };\n\n      uploadBytes(destRef, file, md).then(snapshot => {\n        alert('Generated param file was saved');\n        this.generatedSceneParam = {};\n        this.userEditedSceneParam = {};\n        this.displayStorageTextFile(srcRef);\n      }).catch((e: Error) => {\n        console.error('Param Generation Failed:', e);\n        alert('Generated param file was NOT saved');\n      });\n\n      uploadBytes(sceneSrcDestRef, sceneSrcFile, md);\n      modal.close();\n\n      // destRef?.put(file, md).then(async (sns) => {\n      //   alert('Generated param file was saved');\n      //   this.generatedSceneParam = {};\n      //   this.userEditedSceneParam = {};\n      //   this.displayStorageTextFile(srcRef);\n      // }).catch(e => {\n      //   console.error('Param Generation Failed');\n      //   alert('Generated param file was NOT saved');\n      // });\n      // sceneSrcDestRef?.put(sceneSrcFile, md);\n      // modal.close();\n    });\n  }\n\n  private dateToTimestamp(data: any) {\n    function _dateToTimestamp(element: string, idx: number, arr: any[]) {\n      let dt = new Date(element);\n      if (!isNaN(Number(dt)) && dt instanceof Date && typeof element === \"string\") {\n        arr[idx] = Timestamp.fromDate(dt);\n      }\n    }\n\n    for (let key of Object.keys(data)) {\n      if (Array.isArray(data[key]) \n        && (key.toLowerCase().includes('time') || key.toLowerCase().includes('dates'))) {\n        console.log(\"ARRAY \" + \"data[\" + key + \"]\" + \"=\" + data[key]);\n        data[key].forEach(_dateToTimestamp);\n      }\n\n      else if (this.isDict(data[key])) {\n        for (let key2 of Object.keys(data[key])) {\n          let dt = new Date(data[key][key2]);\n          if (!isNaN(Number(dt)) && dt instanceof Date && this.isString(data[key][key2])) {\n            console.log(\"Dictionary \" + \"data[\" + key + \"]\" + \"=\" + data[key]);\n            data[key][key2] = Timestamp.fromDate(dt);\n          }\n        }\n      }\n\n      else if (this.isString(data[key])\n        && (key.toLowerCase().includes('date') || key.toLowerCase().includes('time'))) {\n        \n        let dt = new Date(data[key]);\n        if (!isNaN(Number(dt)) && dt instanceof Date) {\n          data[key] = Timestamp.fromDate(dt);\n        }\n      }\n    }\n    return data;\n  }\n\n  private isDict(val: any) {\n    return val && typeof val === \"object\" && val.constructor === Object;\n  }\n\n  private isString(val: any) {\n    return typeof val === \"string\" || val.constructor === String;\n  }\n  \n}\n\nexport class Mkthree {\n\n  /* THREE.js member variables */\n  private scene: THREE.Scene | null;\n  private camera: THREE.PerspectiveCamera | null;\n  private cameraPos: THREE.Vector3 | null;\n  private controls: OrbitControls | null;\n  private dirLight: THREE.DirectionalLight | null;\n  private dirLightPos: THREE.Vector3 | null;\n  private light: THREE.AmbientLight | null;\n  private loader: GLTFLoader | null;\n  private renderer: THREE.WebGLRenderer | null;\n  public animationID: number;\n  public active: boolean;\n\n  public canvas: HTMLCanvasElement;\n  \n  /* constructor */\n  constructor() {\n    this.scene = null;\n    this.camera = null;\n    this.cameraPos = null;\n    this.controls = null;\n    this.dirLight = null;\n    this.dirLightPos = null;\n    this.light = null;\n    this.loader = null;\n    this.renderer = null;\n    this.animationID = -1;\n    this.active = false;\n    this.canvas = document.querySelector(\"#three-canvas\") as HTMLCanvasElement;\n    let editorDiv = document.querySelector(\"#editor-div\") as HTMLDivElement;\n    this.canvas.width = editorDiv.offsetWidth;\n    this.canvas.height = editorDiv.offsetHeight;\n    this.canvas.style.width = String(editorDiv.offsetWidth);\n    this.canvas.style.height = String(editorDiv.offsetHeight);\n    this.resizeCanvasAction();\n  }\n\n  /**\n   * Public function to display mesh specified by filepath to a canvas\n   * specified by canvas\n   * \n   * @param {string} filePath\n   * @param {HTMLCanvasElement} canvas\n   * @public\n   */\n  public async displayMesh(meshRef: StorageReference) {\n    console.time(\"displayMesh()\");\n\n    if (this.active) {\n      this.destroy();\n    }\n\n    /* renderer setup */\n    this.renderer = new THREE.WebGLRenderer({ canvas: this.canvas, antialias: true });\n    this.renderer.setClearColor( 0xFFFFFF );\n    this.renderer.physicallyCorrectLights = true;\n    this.renderer.toneMapping = THREE.LinearToneMapping;\n    this.renderer.toneMappingExposure = 10;\n    this.renderer.outputEncoding = THREE.GammaEncoding;\n    this.renderer.gammaFactor = 2.2;\n\n    /* camera setup */\n    this.cameraPos = new THREE.Vector3( 0, 0, 10 );\n    this.camera = \n      new THREE.PerspectiveCamera( 45, this.canvas.width / this.canvas.height, 0.1, 2000 );\n    this.camera.position.set( this.cameraPos.x, this.cameraPos.y, this.cameraPos.z );\n\n    /* light setup */\n    this.dirLightPos = new THREE.Vector3( 0, 2, 0 );\n    this.dirLight = new THREE.DirectionalLight( 0xFFFFFF, 0.5);\n    this.dirLight.position.set( this.dirLightPos.x, this.dirLightPos.y, this.dirLightPos.z )\n    this.light = new THREE.AmbientLight( 0x404040, 0.05 ); // (0x404040, 0.1)\n\n    /* control setup */\n    this.controls = new OrbitControls( this.camera, this.renderer.domElement );\n    this.controls.target = new THREE.Vector3( 0, 0, 0);\n\n    /* scene setup */\n    this.scene = new THREE.Scene();\n    this.scene.add(this.camera);\n    this.scene.add(this.dirLight);\n    this.scene.add(this.light);\n\n    /* load mesh */\n    let objectMesh: any = await this.loadMesh(meshRef);\n\n    /* add loaded mesh to scene */\n    this.scene.add(objectMesh.scene)\n    requestAnimationFrame(this.animate.bind(this));\n    this.renderer.render(this.scene, this.camera);\n    this.active = true;\n\n    console.timeEnd(\"displayMesh()\")\n  }\n\n  /**\n   * Private function to load and return mesh specified by filepath \n   * \n   * @param {string} filePath\n   * @returns {Promise}\n   * @private\n   */\n  private async loadMesh(meshRef: StorageReference) {\n    \n    try {\n\n      let meshUrl = await getDownloadURL(meshRef).catch((e: Error) => {\n        console.error('Error:', e);\n      }) as string;\n\n\n      // let meshUrl = await meshRef.getDownloadURL().catch(e => {\n      //   console.error(\"Error:\", e);\n      // });\n\n      this.loader = new GLTFLoader();\n\n      return new Promise((resolve, reject) => {\n        try {\n          this.loader?.load(meshUrl, function(gltf) {\n            gltf.scene.traverse((child: any) => {\n              if (child.material) {\n                let material = new THREE.MeshPhongMaterial({ color: \"#FFE0BD\" })\n                if (\"morphTargetInfluences\" in child) {\n                  material.morphTargets = true;\n                }\n                child.material = material;\n                child.material.needsUpdate = true;\n              }\n            });\n            resolve(gltf);\n          });\n        } catch (error) {\n          console.error(\"Error:\", error);\n        }\n      });\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  }\n\n  private animate() {\n    this.animationID = requestAnimationFrame(this.animate.bind(this));\n    if (this.scene && this.camera) {\n      this.renderer?.render(this.scene, this.camera);\n    }\n  }\n\n  public destroy() {\n    try {\n      this.scene = null;\n      this.camera = null;\n      this.cameraPos = null;\n      this.controls = null;\n      this.dirLight = null;\n      this.dirLightPos = null;\n      this.light = null;\n      this.loader = null;\n      this.renderer?.clear();\n      this.renderer = null;\n      this.animationID = -1;\n      this.active = false;\n      cancelAnimationFrame(this.animationID);\n    } catch (error) {\n      console.error(\"Error destroying THREE Objects:\", error);\n    }\n  }\n\n  private resizeCanvasAction() {\n    window.addEventListener(\"resize\", (ev: Event) => {\n      let editorDiv = document.querySelector(\"#editor-div\") as HTMLDivElement;\n      this.canvas.width = editorDiv.offsetWidth;\n      this.canvas.height = editorDiv.offsetHeight;\n      this.canvas.style.width = String(editorDiv.offsetWidth);\n      this.canvas.style.height = String(editorDiv.offsetHeight);\n    });\n  }\n}\n\nexport class Mkimage {\n  imgCanvasDiv: HTMLDivElement;\n  imgCanvas: HTMLElement;\n  imgGallery: Viewer;\n\n  constructor() {\n    this.imgCanvasDiv = \n    document.querySelector(\"#image-canvas-div\") as HTMLDivElement;\n\n    this.imgCanvas =\n    document.querySelector(\"#image-canvas\") as HTMLElement;\n\n    this.imgGallery = \n    new Viewer(document.getElementById(\"image-canvas\")!);\n  }\n\n  public async displayImage(fileRef: FileRef, fileName: string) {\n    let li = document.createElement(\"li\");\n    li.setAttribute(\"class\", \"imageList\");\n    let imgDiv = document.createElement(\"div\");\n    let img = document.createElement(\"img\");\n    let imgLabel = document.createElement(\"p\");\n    imgLabel.innerHTML = fileName;\n    // await fileRef.getDownloadURL().then(url => {\n    //   img.src = url;\n    // });\n    await getDownloadURL(fileRef).then(url => {\n      img.src = url;\n    })\n\n    imgDiv.appendChild(img);\n    imgDiv.appendChild(imgLabel);\n    li.appendChild(imgDiv);\n    this.imgCanvas.appendChild(li);\n    this.imgGallery.destroy();\n    this.imgGallery = new Viewer(document.getElementById(\"image-canvas\")!);\n  }\n\n  public removeImages() {\n    let elements = document.getElementsByClassName(\"imageList\");\n    while (elements.length > 0) {\n      elements[0].parentNode?.removeChild(elements[0]);\n    }\n    \n  }\n}\n\nexport class Mkchart {\n  chartDiv: HTMLDivElement;\n  plotX: HTMLSelectElement;\n  plotY: HTMLSelectElement;\n  plotBtn: HTMLButtonElement;\n  finderDiv: HTMLDivElement;\n  chart: any;\n  data: any;\n  isActive: boolean;\n  isBigQuery: boolean;\n\n  constructor() {\n    google.charts.load('current', { packages: ['corechart'] });\n    this.chartDiv = document.querySelector(\"#chart-div\") as HTMLDivElement;\n    this.finderDiv = document.querySelector(\"#finder-div\") as HTMLDivElement;\n    this.plotX = document.querySelector(\"#quick-plot-x\") as HTMLSelectElement;\n    this.plotY = document.querySelector(\"#quick-plot-y\") as HTMLSelectElement;\n    this.plotBtn = document.querySelector(\"#plot-btn\") as HTMLButtonElement;\n    this.isActive = false;\n    this.isBigQuery = false;\n    \n    this.data = null;\n    console.log(this.chartDiv);\n    \n    this.plotBtnAction();\n    \n  }\n\n  public plotBtnAction() {\n    this.plotBtn.addEventListener('click', (ev: Event) => {\n      ev.preventDefault();\n      this.isActive = !this.isActive;\n      if (this.isBigQuery == false) {\n        if (this.isActive) {\n          this.plotBtn.textContent = \"Close Quick Plot\";\n          this.chartDiv.style.zIndex = \"2\";\n          this.finderDiv.style.zIndex = \"1\";\n          let vizData = new google.visualization.DataTable();\n          vizData.addColumn('datetime', this.plotX.value);\n          vizData.addColumn('number', this.plotY.value);\n          \n          for (let i = 0; i < this.data[this.plotX.value].length; i++) {\n            vizData.addRow([ new Date(this.data[this.plotX.value][i]), parseFloat(this.data[this.plotY.value][i]) ]);\n          }\n  \n          console.log(this.chartDiv.clientWidth);\n          let chart = new google.visualization.LineChart(this.chartDiv);\n          let options = {\n            title: this.plotY.value,\n            width: this.chartDiv.offsetWidth,\n            height: this.chartDiv.offsetHeight,\n            legend: 'none' as 'none',\n            pointSize: 10\n          };\n          chart.draw(vizData, options);\n          \n        } else {\n          this.plotBtn.textContent = \"Quick Plot\";\n          this.finderDiv.style.zIndex = \"2\";\n          this.chartDiv.style.zIndex = \"1\";\n        }\n      }\n      else if (this.isBigQuery == true) {\n        if (this.isActive) {\n          this.plotBtn.textContent = \"Close Quick Plot\";\n          this.chartDiv.style.zIndex = \"2\";\n          this.finderDiv.style.zIndex = \"1\";\n\n          let vizData = new google.visualization.DataTable();\n          if (this.plotX.value === 'timestamp') {\n            vizData.addColumn('datetime', this.plotX.value);\n          } else {\n            vizData.addColumn('number', this.plotX.value);\n          }\n\n          if (this.plotY.value === 'timestamp') {\n            vizData.addColumn('datetime', this.plotY.value);\n          } else {\n            vizData.addColumn('number', this.plotY.value);\n          }\n\n          for (let i = 0; i < this.data[this.plotX.value]. length; i++) {\n            vizData.addRow([this.data[this.plotX.value][i], this.data[this.plotY.value][i]]);\n          }\n          let chart = new google.visualization.LineChart(this.chartDiv);\n          let options = {\n            title: this.plotY.value,\n            width: this.chartDiv.offsetWidth,\n            height: this.chartDiv.offsetHeight,\n            legend: 'none' as 'none',\n            pointSize: 10\n          };\n          chart.draw(vizData, options);\n        } else {\n          this.plotBtn.textContent = \"Quick Plot\";\n          this.finderDiv.style.zIndex = \"2\";\n          this.chartDiv.style.zIndex = \"1\";\n        }\n      }\n    });\n\n    \n  }\n\n  public populateAxisFields(data: any) {\n    this.data = data;\n    this.isBigQuery = false;\n    for (let key of Object.keys(data)) {\n      if (Array.isArray(data[key]) \n        && (key.includes(\"_dates\") || key.toLowerCase().includes('times'))) {\n        let option = document.createElement(\"option\");\n        option.setAttribute(\"class\", \"axis-options\");\n        option.setAttribute(\"value\", key);\n        option.textContent = key;\n        this.plotX.appendChild(option);\n      }\n      else if (Array.isArray(data[key]) \n        && (key.includes(\"_values\")) || key.toLowerCase().includes('values')) {\n        let option = document.createElement(\"option\");\n        option.setAttribute(\"class\", \"axis-options\");\n        option.setAttribute(\"value\", key);\n        option.textContent = key;\n        this.plotY.appendChild(option);\n      }\n    }\n  }\n\n  public bqPopulateAxisFields(dataArr: any, dataset: string) {\n    this.isBigQuery = true;\n    if (dataset === \"eyedata\") {\n      let eyedataObj: any = {};\n      //console.log('bqpopulate axis dataArr', dataArr);\n      dataArr.forEach((data: any) => {\n        // console.log('data in dataArr', data);\n        for (let key of Object.keys(data)) {\n          //console.log('key', key);\n          if (key === \"timestamp\") {\n            try {\n              eyedataObj[key].push(new Date(data[key].value));\n            } catch {\n              eyedataObj[key] = [];\n              eyedataObj[key].push(new Date(data[key].value));\n              this.addAxisOption(key);\n            }\n          } else {\n            try {\n              eyedataObj[key].push(parseFloat(data[key]));\n            } catch {\n              eyedataObj[key] = [];\n              eyedataObj[key].push(parseFloat(data[key]));\n              this.addAxisOption(key);\n            }\n          }\n        }\n      });\n      this.data = eyedataObj;\n    }\n\n  }\n\n  private addAxisOption(key: string) {\n    let optionX = document.createElement('option');\n    optionX.setAttribute('class', 'axis-options');\n    optionX.setAttribute('value', key);\n    optionX.textContent = key;\n    let optionY = document.createElement('option');\n    optionY.setAttribute('class', 'axis-options');\n    optionY.setAttribute('value', key);\n    optionY.textContent = key;\n    this.plotX.appendChild(optionX);\n    this.plotY.appendChild(optionY);\n  }\n\n  public removeElementsByClassName(cName: string) {\n    let elements = document.getElementsByClassName(cName);\n    while (elements.length > 0) {\n      elements[0].parentNode?.removeChild(elements[0]);\n    }\n  }\n}","import { getApp } from \"firebase/app\";\nimport { getFunctions, httpsCallable } from \"firebase/functions\";\nimport { Query, doc, getDoc, getDocs } from 'firebase/firestore';\n\nconst functions = getFunctions(getApp());\n// const functions = firebase.functions();\n\n// const listTables = functions.httpsCallable('listTables');\nconst listTables = httpsCallable(functions, 'listTables');\n\n// const bqQuery = functions.httpsCallable('bqQuery');\nconst bqQuery = httpsCallable(functions, 'bqQuery');\n\nexport class Mkquery {\n  public rfidMode: boolean;\n  \n  constructor() {\n    this.rfidMode = false;\n\n  };\n  /**\n   * Connects and returns query strings\n   * \n   * @param {{field: string, keyword: string}[]} queryParams\n   * @returns {string} returns a string of connected query strings\n   */\n  public mkquery(queryParams: {field: string, keyword: string}[]) {\n    let queryString: string;\n    \n    queryString = \"\";\n    queryParams.forEach(queryParam => {\n      queryString += this._mkquery(queryParam.field, queryParam.keyword);\n    });\n\n    return queryString;\n  }\n  \n  /**\n   * Generates and returns individual query string for a given field and keyword\n   * \n   * @param {string} field\n   * @param {string} keyword\n   * @returns {string} returns generated query string\n   * @private\n   */\n  private _mkquery(field: string, keyword: string) {\n    if (field.toLowerCase().includes(\"date\")) {\n      const DAY_TO_MS: number = 86400000;\n      let dateStr: string[];\n      let refDate: Date;\n\n      dateStr = keyword.split(\";\");\n      dateStr.length === 2 ? dateStr[1] = dateStr[1].trim() : dateStr[1] = \"\";\n      refDate = new Date(dateStr[0]);\n\n      if (dateStr[1].includes(\"+-\")) {\n        let upperDate: Date;\n        let lowerDate: Date;\n        let range: number;\n        let queryStr: string;\n\n        range = Number(dateStr[1].substring(2, dateStr[1].length));\n        upperDate = new Date(refDate.getTime() + range * DAY_TO_MS);\n        lowerDate = new Date(refDate.getTime() - range * DAY_TO_MS);\n        queryStr = \".where(\" + `\"${field}\"` + \", '>=', \" + \"new Date(\"\n          + String(lowerDate.getTime()) + \")).where(\" + `\"${field}\"`\n          + \", '<=', \" + \"new Date(\" + String(upperDate.getTime()) + \"))\";\n\n        return queryStr;\n      }\n\n      else if (dateStr[1].includes(\"+\") && !dateStr[1].includes(\"-\")) {\n        let upperDate: Date;\n        let range: number;\n        let queryStr: string;\n\n        range = Number(dateStr[1].substring(1, dateStr[1].length));\n        upperDate = new Date(refDate.getTime() + range * DAY_TO_MS);\n        queryStr = \".where(\" + `\"${field}\"` + \", '>=', \" + \"new Date(\"\n          + String(refDate.getTime()) + \")).where(\" + `\"${field}\"`\n          + \", '<=', \" + \"new Date(\" + String(upperDate.getTime()) + \"))\";\n\n        return queryStr;\n      }\n\n      else if (dateStr[1].includes(\"-\") && !dateStr[1].includes(\"+\")) {\n        let lowerDate: Date;\n        let range: number;\n        let queryStr: string;\n\n        range = Number(dateStr[1].substring(1, dateStr[1].length));\n        lowerDate = new Date(refDate.getTime() + range * DAY_TO_MS);\n        queryStr = \".where(\" + `\"${field}\"` + \", '>=', \" + \"new Date(\"\n          + String(lowerDate.getTime()) + \")).where(\" + `\"${field}\"`\n          + \", '<=', \" + \"new Date(\" + String(refDate.getTime()) + \"))\";\n\n        return queryStr;\n      }\n\n      else if ( !(dateStr[1].includes(\"+\") || dateStr[1].includes(\"-\")) ) {\n        let upperDate: Date;\n        let queryStr: string;\n        \n        upperDate = new Date(refDate.getTime() + DAY_TO_MS);\n        queryStr = \".where(\" + `\"${field}\"` + \", '>=', \" + \"new Date(\"\n          + String(refDate.getTime()) + \")).where(\" + `\"${field}\"` + \", '<=', \"\n          + \"new Date(\" + String(upperDate.getTime()) + \"))\";\n\n        return queryStr;\n      }\n    }\n    else {\n      let queryStr: string;\n\n      // queryStr = \".where(\" + `\"${field}\"` + \", '==', \" + `\"${keyword}\"` + \")\";\n      queryStr = `where('${field}', '==', '${keyword}')`;\n\n      return queryStr;\n    }\n  }\n\n\n\n  public async decodeQuery(query: Query) {\n    async function loadData(doc: any, arr: any[]) {\n      await arr.push(doc.data());\n    }\n\n    let arr = new Array();\n\n    await getDocs(query).then(async (querySnapshot) => {\n      if (!querySnapshot.empty) {\n        let promises = querySnapshot.docs.map(doc => loadData(doc, arr));\n        await Promise.all(promises);\n      } else {\n        console.log('Found No Documents');\n        alert('Found No Documents');\n      }\n    }).catch((e: Error) => {\n      console.error('Error Getting Documents:', e);\n    });\n\n    return arr;\n\n    // await query.get().then(async querySnapshot => {\n    //   if (!querySnapshot.empty) {\n    //     let promises = querySnapshot.docs.map(doc => loadData(doc, arr));\n    //     await Promise.all(promises);\n    //   }\n      \n    //   else {\n    //     console.log(\"Found No Documents\");\n    //     alert(\"Found No Documents\");\n    //   }\n    // }).catch(e => {\n    //   console.error(\"Error getting documents:\", e);\n    // });\n\n    // return arr;\n  }\n  \n  public mkbquery(dataset: string, agent: string, date: string) {\n    let queryDateLower: string | Date = new Date(date);\n    let queryDateUpper: string | Date = new Date(date);\n    queryDateUpper.setDate(queryDateUpper.getDate() + 1);\n    queryDateLower = queryDateLower.toJSON().split('T')[0];\n    queryDateUpper = queryDateUpper.toJSON().split('T')[0];\n\n    let str = `SELECT *\n              FROM \\`sandbox-ce2c5.${dataset}.${agent}\\`\n              WHERE timestamp BETWEEN '${queryDateLower}' AND '${queryDateUpper}'\n              ORDER BY timestamp ASC`;\n    console.log(\"querystr\", str);\n    return str;\n  }\n\n  public async decodeBigQuery(queryStr: string) {\n    let test = await bqQuery(queryStr);\n    return test;\n  }\n  \n}","import * as math from 'mathjs';\nimport cloneDeep from 'lodash.clonedeep';\nimport isPlainObject from 'lodash/isPlainObject';\nimport isArray from 'lodash/isArray';\n\nexport class ParseEngine {\n\n  constructor() {\n\n  }\n\n  public generateParamObject(obj: any, scheme: string) {\n    \n    let userObj = cloneDeep(obj);\n    console.log(userObj);\n    let totalLen = 1;\n    let minLen = 1;\n    let maxLen = 1;\n    let path = [\n      'CAMERAS', 'LIGHTS',\n      'OBJECTS', 'IMAGES',\n      'durationMS', 'IMAGEFILTERS',\n      'OBJECTFILTERS'\n    ];\n\n    // Parse and generate based on smart text\n    path.forEach((module, index) => {\n      if (isArray(userObj[module]) && userObj[module].length > 0) {\n        userObj[module] = this.parseAndGenerate2(userObj[module]);\n        totalLen *= userObj[module].length;\n        minLen = (userObj[module].length > minLen) ? minLen : userObj[module].length;\n        maxLen = (maxLen > userObj[module].length) ? maxLen : userObj[module].length;\n      } else if (isPlainObject(userObj[module])) {\n        for (let key in userObj[module]) {\n          if (isArray(userObj[module][key]) && userObj[module][key].length > 0) {\n            userObj[module][key] = this.parseAndGenerate2(userObj[module][key]);\n            totalLen *= userObj[module][key].length;\n            minLen = (userObj[module][key].length > minLen) ? minLen : userObj[module][key].length;\n            maxLen = (maxLen > userObj[module][key].length) ? maxLen : userObj[module][key].length;\n          } else if (isPlainObject(userObj[module][key])) {\n            for (let key2 in userObj[module][key]) {\n              if (isArray(userObj[module][key][key2]) && userObj[module][key][key2].length > 0) {\n                userObj[module][key][key2] = this.parseAndGenerate2(userObj[module][key][key2]);\n                totalLen *= userObj[module][key][key2].length;\n                minLen = (userObj[module][key][key2].length > minLen) ? minLen : userObj[module][key][key2].length;\n                maxLen = (maxLen > userObj[module][key][key2].length) ? maxLen : userObj[module][key][key2].length;\n              } else if (isPlainObject(userObj[module][key][key2])) {\n                for (let key3 in userObj[module][key][key2]) {\n                  if (isArray(userObj[module][key][key2][key3]) && userObj[module][key][key2][key3].length > 0) {\n                    userObj[module][key][key2][key3] = this.parseAndGenerate2(userObj[module][key][key2][key3]);\n                    totalLen *= userObj[module][key][key2][key3].length;\n                    minLen = (userObj[module][key][key2][key3].length > minLen) ? minLen : userObj[module][key][key2][key3].length;\n                    maxLen = (maxLen > userObj[module][key][key2][key3].length) ? maxLen : userObj[module][key][key2][key3].length;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    });\n\n    if (scheme == 'vectorize') {\n      path.forEach((module, index) => {\n        if (isArray(userObj[module]) && userObj[module].length > 1) {\n          let tmp = [];\n          for (let i = 0; i < totalLen; i++) {\n            tmp.push(userObj[module][i % userObj[module].length]);\n          }\n          userObj[module] = tmp;\n        } else if (isPlainObject(userObj[module])) {\n          for (let key in userObj[module]) {\n            if (isArray(userObj[module][key]) && userObj[module][key].length > 1) {\n              let tmp = [];\n              for (let i = 0; i < totalLen; i++) {\n                tmp.push(userObj[module][key][i % userObj[module][key].length]);\n              }\n              userObj[module][key] = tmp;\n            } else if (isPlainObject(userObj[module][key])) {\n              for (let key2 in userObj[module][key]) {\n                if (isArray(userObj[module][key][key2]) && userObj[module][key][key2].length > 1) {\n                  let tmp = [];\n                  for (let i = 0; i < totalLen; i++) {\n                    tmp.push(userObj[module][key][key2][i % userObj[module][key][key2].length]);\n                  }\n                  userObj[module][key][key2] = tmp;\n                } else if (isPlainObject(userObj[module][key][key2])) {\n                  for (let key3 in userObj[module][key][key2]) {\n                    if (isArray(userObj[module][key][key2][key3]) && userObj[module][key][key2][key3].length > 1) {\n                      let tmp = [];\n                      for (let i = 0; i < totalLen; i++) {\n                        tmp.push(userObj[module][key][key2][key3][i % userObj[module][key][key2][key3].length]);\n                      }\n                      userObj[module][key][key2][key3] = tmp;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      });  \n    } else if (scheme == 'expand') {\n      path.forEach((module, index) => {\n        if (\n          isArray(userObj[module])\n          && userObj[module].length > 1\n          && userObj[module].length != maxLen\n        ) {\n          let err = new Error(`Length Mismatch: ${module}.length=${userObj[module].length} != maxLen=${maxLen}`);\n          alert(err.message);\n          throw err;\n          \n        } else if (isPlainObject(userObj[module])) {\n          for (let key in userObj[module]) {\n            if (\n              isArray(userObj[module][key])\n              && userObj[module][key].length > 1\n              && userObj[module][key].length != maxLen\n            ) {\n              let err = new Error(`Length Mismatch: ${module}[${key}].length=${userObj[module][key].length} != maxLen=${maxLen}`);\n              alert(err.message);\n              throw err;\n            } else if (isPlainObject(userObj[module][key])) {\n              for (let key2 in userObj[module][key]) {\n                if (\n                  isArray(userObj[module][key][key2])\n                  && userObj[module][key][key2].length > 1\n                  && userObj[module][key][key2].length != maxLen\n                ) {\n                  let err = new Error(`Length Mismatch: ${module}[${key}][${key2}].length=${userObj[module][key][key2].length} != maxLen=${maxLen}`);\n                  alert(err.message);\n                  throw err;\n                } else if (isPlainObject(userObj[module][key][key2])) {\n                  for (let key3 in userObj[module][key][key2]) {\n                    if (\n                      isArray(userObj[module][key][key2][key3])\n                      && userObj[module][key][key2][key3].length > 1\n                      && userObj[module][key][key2][key3].length != maxLen\n                    ) {\n                      let err = new Error(`Length Mismatch: ${module}[${key}][${key2}][${key3}].length=${userObj[module][key][key2][key3].length} != maxLen=${maxLen}`);\n                      alert(err.message);\n                      throw err;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      });\n    }\n\n    console.log('userObj', userObj, 'totalLen:', totalLen);\n    return userObj;\n  }\n\n  private genParamObj(type: string, obj: any) {\n    \n    if (type == 'CAMERAS') {\n      for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          obj[key].position = this.vectorize(obj[key].position, 'cartesianObj');\n          obj[key].targetInches = this.vectorize(obj[key].targetInches, 'cartesianObj');\n          obj[key].visible = this.vectorize(obj[key].visible, 'array');\n        }\n      }\n    } else if (type == 'LIGHTS') {\n      for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          obj[key].position = this.vectorize(obj[key].position, 'cartesianObj');\n          obj[key].intensity = this.vectorize(obj[key].intensity, 'array');\n          obj[key].visible = this.vectorize(obj[key].visible, 'array');\n        }\n      }\n    } else if (type == 'OBJECTS') {\n      for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          obj[key].positionInches = this.vectorize(obj[key].positionInches, 'cartesianObj');\n          obj[key].rotationDegrees = this.vectorize(obj[key].rotationDegrees, 'cartesianObj');\n          obj[key].sizeInches = this.vectorize(obj[key].sizeInches, 'array');\n          obj[key].material.opacity = this.vectorize(obj[key].material.opacity, 'array');\n          obj[key].visible = this.vectorize(obj[key].visible, 'array');\n        }\n      }\n    } else if (type == 'IMAGES') {\n      obj.imageidx = this.vectorize(obj.imageidx, 'array');\n    }\n  }\n\n  private normal(mu: number, sigma: number, n: number) {\n    let u1 = math.random([n]);\n    let u2 = math.random([n]);\n\n    let R_sq = math.multiply(-2, math.log(u1));\n    let theta = math.multiply(2 * math.pi, u2);\n\n    let z1 = math.dotMultiply(math.sqrt(R_sq as math.Matrix), math.cos(theta as math.Matrix));\n    let sample = math.add(mu, math.multiply(z1, sigma));\n\n    return sample;\n  }\n\n  private parseAndGenerate2 (row: any[]) {\n    let sample: any;\n    \n    if (Object.prototype.toString.call(row[0]) === '[object String]') {\n      let recipe = row[0].split('/');\n      if (recipe[0] == 'normal' || recipe[0] == 'n') {\n        console.log('row:', row);\n        console.log('recipe:', recipe);\n        let mu = Number(recipe[1].split(',')[0]);\n        let sigma = Number (recipe[1].split(',')[1]);\n        let n = Number(recipe[2]);\n        sample = this.normal(mu, sigma, n) as number[];\n        console.log(sample);\n      } else if (recipe[0] == 'uniform' || recipe[0] == 'u') {\n        let min = Number(recipe[1].split(',')[0]);\n        let max = Number(recipe[1].split(',')[1]);\n        let size = [Number(recipe[2])];\n        sample = math.random(size, min, max);\n      } else if (recipe[0] == 'range' || recipe[0] == 'r') {\n        let start = Number(recipe[1].split(',')[0]);\n        let end = Number(recipe[1].split(',')[1]);\n        let step = Number(recipe[2]);\n        let range = math.range(start, end, step);\n        sample = [];\n        range.forEach(value => {\n          sample.push(Number(parseFloat(value).toPrecision(4)));\n        });\n      } else if (recipe[0] == 'linspace' || recipe[0] == 'l') {\n        let start = Number(recipe[1].split(',')[0]);\n        let end = Number(recipe[1].split(',')[1]);\n        let num = Number(recipe[2]);\n        let step = (end - start) / (num - 1);\n        let linspace = math.range(start, end, step, true);\n        sample = [];\n        linspace.forEach(value => {\n          sample.push(Number(parseFloat(value).toPrecision(4)));\n        });\n      } else if (recipe[0] == 'movie' || recipe[0] == 'm') {\n        let list = recipe[1].split(',');\n        let tmp: any[] = [];\n        list.forEach((value: string) => {\n          tmp.push(Number(parseFloat(value).toPrecision(4)));\n        });\n        sample = [];\n        sample.push(tmp);\n      } else {\n        let list = recipe[0].split(',');\n        sample = [];\n        list.forEach((value: string) => {\n          sample.push(Number(parseFloat(value).toPrecision(4)));\n        });\n      }\n    } else {\n      return row;\n    }\n    // else {\n    //   if (isNaN(row[0]) == false) {\n    //     console.log('single number', row);\n    //     sample = [];\n    //     sample.push(row);\n    //   }\n    // }\n\n    return sample;\n  }\n\n  private parseAndGenerate(row: any) {\n    let sample: any;\n    if (Object.prototype.toString.call(row) === '[object String]') {\n      let recipe = row.split('/');\n      if (recipe[0] == 'normal' || recipe[0] == 'n') {\n        console.log('row:', row);\n        let mu = Number(recipe[1].split(',')[0]);\n        let sigma = Number (recipe[1].split(',')[1]);\n        let n = Number(recipe[2]);\n        sample = this.normal(mu, sigma, n) as number[];\n      } else if (recipe[0] == 'uniform' || recipe[0] == 'u') {\n        let min = Number(recipe[1].split(',')[0]);\n        let max = Number(recipe[1].split(',')[1]);\n        let size = [Number(recipe[2])];\n        sample = math.random(size, min, max);\n      } else if (recipe[0] == 'range' || recipe[0] == 'r') {\n        let start = Number(recipe[1].split(',')[0]);\n        let end = Number(recipe[1].split(',')[1]);\n        let step = Number(recipe[2]);\n        let range = math.range(start, end, step);\n        sample = [];\n        range.forEach(value => {\n          sample.push(Number(parseFloat(value).toPrecision(4)));\n        });\n      } else if (recipe[0] == 'linspace' || recipe[0] == 'l') {\n        let start = Number(recipe[1].split(',')[0]);\n        let end = Number(recipe[1].split(',')[1]);\n        let num = Number(recipe[2]);\n        let step = (end - start) / (num - 1);\n        let linspace = math.range(start, end, step, true);\n        sample = [];\n        linspace.forEach(value => {\n          sample.push(Number(parseFloat(value).toPrecision(4)));\n        });\n      } else if (recipe[0] == 'movie' || recipe[0] == 'm') {\n        let list = recipe[1].split(',');\n        let tmp: any[] = [];\n        list.forEach((value: string) => {\n          tmp.push(Number(parseFloat(value).toPrecision(4)));\n        });\n        sample = [];\n        sample.push(tmp);\n      } else {\n        let list = recipe[0].split(',');\n        sample = [];\n        list.forEach((value: string) => {\n          sample.push(Number(parseFloat(value).toPrecision(4)));\n        });\n      }\n    } else {\n      if (isNaN(row) == false) {\n        console.log('single number', row);\n        sample = [];\n        sample.push(row);\n      }\n    }\n\n    return sample;\n  }\n\n  private vectorize(obj: any, type: string) {\n    let tmp: any;\n    if (type == 'array') {\n      tmp = [];\n      obj.forEach((row: any) => {\n        tmp.push(...this.parseAndGenerate(row));\n      });\n    } else if (type == 'cartesianObj') {\n      \n      tmp = {x: [], y: [], z: []};\n\n      let tmp2: any = {x: [], y: [], z: []};\n\n      for (let axis in obj) {\n        if (obj.hasOwnProperty(axis)) {\n          obj[axis].forEach((row: any) => {\n            tmp2[axis].push(...this.parseAndGenerate(row));\n          });\n        }\n      }\n\n      if (!(tmp2.x.length == tmp2.y.length && tmp2.y.length == tmp2.z.length)) {\n        tmp2.x.forEach((x: number) => {\n          tmp2.y.forEach((y: number) => {\n            tmp2.z.forEach((z: number) => {\n              tmp.x.push(x);\n              tmp.y.push(y);\n              tmp.z.push(z);\n            });\n          });\n        });\n      } else {\n        tmp.x = tmp2.x;\n        tmp.y = tmp2.y;\n        tmp.z = tmp2.z;\n      }\n    }\n    return tmp;\n  }\n}\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkmkfiles\"] = self[\"webpackChunkmkfiles\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [410], () => (__webpack_require__(48519)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","taskParamSchema","firebaseApp","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","auth","getAuth","provider","GoogleAuthProvider","addScope","getRedirectResult","then","result","console","log","user","email","currentUser","signInWithRedirect","functions","getFunctions","db","getFirestore","storage","getStorage","storageRef","ref","rootRef","isRoot","mkq","Mkquery","mkf","Mkfinder","httpsCallable","bqListDatasets","datasetList","bqOptgroup","document","querySelector","data","forEach","dataset","option","createElement","value","textContent","appendChild","rfidToggle","qryLocSelc","fieldSelector","homeLink","paramsLink","paramstorageLink","sceneParamsLink","dailyDataLink","marmosetsLink","window","addEventListener","evt","preventDefault","dispatchEvent","Event","listStorageFiles","ev","decodeQuery","collection","docs","listFirestoreDocs","queryResult","fs","ki0","ki1","ki2","goBtn","plotX","plotY","plotBtn","style","visibility","resetPlaceholder","removeElementsByClassName","nameMarmosets","setAttribute","sexMarmosets","rfidMarmosets","breedingMarmosets","birthdateMarmosets","fieldSelectorMarmosets","agentTypeCurDate","fieldSelectorMkturk","identityObjects","meshObjects","nounObjects","fieldSelectorObjects","nameCurDate","bqAgentDate","field","queryForm","keywordInputs","querySelectorAll","i","length","placeholder","cName","elements","getElementsByClassName","parentNode","removeChild","async","qryLoc","k0","k1","queryParam","queryStr","push","keyword","error","alert","query","where","mkquery","mkbquery","startsWith","checked","finder","selectRow","mke","displayFirebaseTextFile","getData","test","decodeBigQuery","Array","isArray","listBigQueryTable","constructor","this","Tabulator","previousPath","getApp","selectedImages","backBtn","showImagesBtn","numImgSlider","downloadBtn","pathName","backBtnAction","showImagesBtnAction","numImgSliderAction","downloadBtnAction","refreshStorageTable","mkt","Mkthree","mki","Mkimage","Mkeditor","mkc","Mkchart","dataArr","database","displayFirestoreTable","timestampToDate","makeActiveBtn","display","storeParamBtn","destroy","innerText","index","layout","initialSort","column","dir","columns","title","width","headerSort","selectable","selectableRangeMode","rowClick","event","row","stopPropagation","removeImages","editorDivElement","zIndex","imgCanvasDiv","canvas","populateAxisFields","rowTap","tableBuilt","selectAllBox","deselectRow","visible","_timestampToDate","element","idx","arr","toDate","toJSON","time","key","Object","keys","isDict","e","key2","isString","isNumber","timeEnd","val","String","isFinite","fileRef","formatFileSize","size","threshold","Math","abs","units","u","toFixed","disabled","fullPath","paramGenBtnBox","svSceneBtn","updateBtn","btnBoxDiv","gridTemplateAreas","filePromise","pathArr","split","mdArr","fileList","listAll","prefixes","folder","name","contentType","items","map","fileArr","getMetadata","md","timeCreated","Promise","all","displayStorageTable","folderRef","getActiveFile","id","parent","metadataArr","responsiveLayout","resizableColumns","widthGrow","rowDblClick","rowDblTap","includes","displayStorageTextFile","imgRef","imgName","displayImage","meshRef","displayMesh","rowSelectionChanged","rows","imageTypeTest","agent","displayBigqueryTable","displayBigQueryTableRow","dataLoaded","bqPopulateAxisFields","imgCanvas","gridTemplateColumns","getSelectedRows","file","blob","Blob","JSON","stringify","type","saveAs","docName","FirestoreDocRoot","Doctype","docname","Docname","getDownloadURL","url","fetch","editorElement","editor","activeFile","loc","updateBtnAction","makeActiveBtnAction","storeParamBtnAction","fileNameInput","fileRenameBtn","fileDupBtn","fileDupModal","renameBtnAction","renameTextFieldAction","fileDupBtnAction","genBtn","expandBtn","genBtnAction","svSceneBtnAction","pe","ParseEngine","userEditedSceneParam","generatedSceneParam","options","modes","sortObjectKeys","trackFirebaseActiveFile","timestamp","Taskdoc","Imagesdoc","sceneTemplateOptions","templates","text","fieldOfView","near","far","position","x","y","z","targetInches","color","intensity","meshpath","objectdoc","sizeInches","positionInches","rotationDegrees","material","metalness","roughness","reflectivity","opacity","transparent","morphTarget","imagebag","imageidx","taskParamOptions","onClassName","classNameParams","path","schema","EditorParams","response","json","catch","taskParamKeys","parse","properties","json2","assign","fileName","showModal","activeFileName","focus","select","close","srcFileRef","dupFileRef","dupFile","get","uploadBytes","snapshot","fileDupEvent","generateSceneParamModalAction","collapsibles","coll","classList","toggle","content","nextElementSibling","rtSize","sampling","params","n","history","editorParams","values","editable","szDiv","addRowSize","undoSz","addRow","NaN","undo","rtPos","target","posDiv","addRowPos","undoPos","rtDeg","degDiv","addRowDeg","undoDeg","curFileName","oldFileRef","newFileRef","newFile","deleteObject","renameEvent","setDoc","doc","dateToTimestamp","updatedFile","metadata","Agent","date","Date","generateParamObject","modal","modalFilename","now","toLocaleDateString","srcRef","destRef","sceneSrcFileName","sceneSrcDestRef","sceneSrcFile","_dateToTimestamp","dt","isNaN","Number","Timestamp","fromDate","toLowerCase","scene","camera","cameraPos","controls","dirLight","dirLightPos","light","loader","renderer","animationID","active","editorDiv","offsetWidth","height","offsetHeight","resizeCanvasAction","THREE","WebGLRenderer","antialias","setClearColor","physicallyCorrectLights","toneMapping","LinearToneMapping","toneMappingExposure","outputEncoding","GammaEncoding","gammaFactor","Vector3","PerspectiveCamera","set","DirectionalLight","AmbientLight","OrbitControls","domElement","Scene","add","objectMesh","loadMesh","requestAnimationFrame","animate","bind","render","meshUrl","GLTFLoader","resolve","reject","load","gltf","traverse","child","MeshPhongMaterial","morphTargets","needsUpdate","clear","cancelAnimationFrame","imgGallery","getElementById","li","imgDiv","img","imgLabel","innerHTML","src","google","charts","packages","chartDiv","finderDiv","isActive","isBigQuery","plotBtnAction","vizData","visualization","DataTable","addColumn","parseFloat","clientWidth","chart","LineChart","legend","pointSize","draw","eyedataObj","addAxisOption","optionX","optionY","bqQuery","rfidMode","queryParams","queryString","_mkquery","DAY_TO_MS","dateStr","refDate","trim","upperDate","lowerDate","range","substring","getTime","getDocs","querySnapshot","empty","promises","loadData","queryDateLower","queryDateUpper","setDate","getDate","str","obj","scheme","userObj","totalLen","minLen","maxLen","module","parseAndGenerate2","key3","tmp","err","Error","message","genParamObj","hasOwnProperty","vectorize","normal","mu","sigma","u1","math","random","u2","R_sq","multiply","theta","pi","z1","dotMultiply","sqrt","cos","sample","prototype","toString","call","recipe","min","max","start","end","step","toPrecision","linspace","list","parseAndGenerate","tmp2","axis","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","loaded","__webpack_modules__","m","amdD","amdO","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","d","definition","o","defineProperty","enumerable","g","globalThis","Function","prop","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}